---
文档类型: 知识库文档
需求编号: DOC-2025-11-004
创建日期: 2025-11-26
创建者: claude-sonnet-4-5 (claude-sonnet-4-5-20250929)
最后更新: 2025-11-26
更新者: claude-sonnet-4-5 (claude-sonnet-4-5-20250929)
状态: 已批准
---

# Python 代码规范 - 11. 工具配置

### 11.1 代码格式化 - Black

安装：
```bash
pip install black
```

配置 `pyproject.toml`：
```toml
[tool.black]
line-length = 79
target-version = ['py311']
include = '\.pyi?$'
extend-exclude = '''
/(
  # 默认排除目录
  \.git
  | \.venv
  | build
  | dist
)/
'''
```

运行：
```bash
black .
```

### 11.2 代码检查 - Ruff

安装：
```bash
pip install ruff
```

配置 `pyproject.toml`：
```toml
[tool.ruff]
line-length = 79
target-version = "py311"

[tool.ruff.lint]
select = [
    "E",  # pycodestyle errors
    "W",  # pycodestyle warnings
    "F",  # pyflakes
    "I",  # isort
    "C",  # flake8-comprehensions
    "B",  # flake8-bugbear
]
ignore = [
    "E501",  # line too long (由 black 处理)
]
```

运行：
```bash
ruff check .
```

### 11.3 类型检查 - Mypy

安装：
```bash
pip install mypy
```

配置 `mypy.ini`：
```ini
[mypy]
python_version = 3.11
warn_return_any = True
warn_unused_configs = True
disallow_untyped_defs = True

[mypy-tests.*]
disallow_untyped_defs = False
```

运行：
```bash
mypy .
```

---

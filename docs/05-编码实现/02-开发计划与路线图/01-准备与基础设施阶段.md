---
æ–‡æ¡£ç±»å‹: å®ç°æ–‡æ¡£
éœ€æ±‚ç¼–å·: DOC-2025-11-001
åˆ›å»ºæ—¥æœŸ: 2025-11-15
åˆ›å»ºè€…: claude-sonnet-4-5 (claude-sonnet-4-5-20250929)
æœ€åæ›´æ–°: 2025-11-29
æ›´æ–°è€…: claude-sonnet-4-5 (claude-sonnet-4-5-20250929)
çŠ¶æ€: å·²æ‰¹å‡†
---

# AIæ ‡ä¹¦æ™ºèƒ½åˆ›ä½œå¹³å° - å‡†å¤‡ä¸åŸºç¡€è®¾æ–½é˜¶æ®µ

> **é˜¶æ®µ**: é˜¶æ®µ0-1
> **å‘¨æœŸ**: ç¬¬1-3å‘¨
> **ç›®æ ‡**: å®Œæˆå¼€å‘ç¯å¢ƒæ­å»ºå’Œæ ¸å¿ƒåŸºç¡€è®¾æ–½

## ğŸ“‹ æ–‡æ¡£å¯¼èˆª

æœ¬æ–‡æ¡£æ˜¯å¼€å‘è®¡åˆ’ä¸è·¯çº¿å›¾çš„ä¸€éƒ¨åˆ†ï¼Œå…¶ä»–ç›¸å…³æ–‡æ¡£ï¼š

1. [00-å¼€å‘è®¡åˆ’æ€»è§ˆ.md](./00-å¼€å‘è®¡åˆ’æ€»è§ˆ.md) - é¡¹ç›®é˜¶æ®µæ¦‚è§ˆå’Œå›¢é˜Ÿé…ç½®
2. **01-å‡†å¤‡ä¸åŸºç¡€è®¾æ–½é˜¶æ®µ.md**ï¼ˆæœ¬æ–‡æ¡£ï¼‰- é˜¶æ®µ0-1å¼€å‘è®¡åˆ’
3. [02-åç«¯å¼€å‘é˜¶æ®µ.md](./02-åç«¯å¼€å‘é˜¶æ®µ.md) - é˜¶æ®µ2åç«¯æ ¸å¿ƒå¼€å‘
4. [03-å‰ç«¯å¼€å‘é˜¶æ®µ.md](./03-å‰ç«¯å¼€å‘é˜¶æ®µ.md) - é˜¶æ®µ3å‰ç«¯æ ¸å¿ƒå¼€å‘
5. [04-AIèƒ½åŠ›å¼€å‘é˜¶æ®µ.md](./04-AIèƒ½åŠ›å¼€å‘é˜¶æ®µ.md) - é˜¶æ®µ4 AIèƒ½åŠ›å¼€å‘
6. [05-ä¸šåŠ¡åŠŸèƒ½å¼€å‘é˜¶æ®µ.md](./05-ä¸šåŠ¡åŠŸèƒ½å¼€å‘é˜¶æ®µ.md) - é˜¶æ®µ5ä¸šåŠ¡åŠŸèƒ½å¼€å‘
7. [06-æµ‹è¯•éƒ¨ç½²ä¸æ€»ç»“.md](./06-æµ‹è¯•éƒ¨ç½²ä¸æ€»ç»“.md) - é˜¶æ®µ6-7æµ‹è¯•éƒ¨ç½²

## é˜¶æ®µ0ï¼šå‡†å¤‡é˜¶æ®µ (ç¬¬1å‘¨)

**ç›®æ ‡**: å®Œæˆå¼€å‘ç¯å¢ƒæ­å»ºå’Œå›¢é˜Ÿåä½œå·¥å…·é…ç½®

### ä»»åŠ¡ 0.1: å¼€å‘ç¯å¢ƒæ­å»º

**è´Ÿè´£äºº**: DevOpså·¥ç¨‹å¸ˆ
**å·¥æ—¶**: 8å°æ—¶
**ä¼˜å…ˆçº§**: P0ï¼ˆæœ€é«˜ï¼‰

**è¯¦ç»†æ­¥éª¤**:

1. **æœ¬åœ°å¼€å‘ç¯å¢ƒå‡†å¤‡** (2h)
   - [ ] å®‰è£…Node.js 18.x LTS
   - [ ] å®‰è£…Python 3.11
   - [ ] å®‰è£…Docker Desktop
   - [ ] å®‰è£…PostgreSQL 14å®¢æˆ·ç«¯å·¥å…·
   - [ ] å®‰è£…Rediså®¢æˆ·ç«¯å·¥å…·
   - [ ] é…ç½®Gitå’ŒSSHå¯†é’¥

2. **IDEé…ç½®** (2h)
   - [ ] å®‰è£…VSCodeå¹¶é…ç½®æ¨èæ’ä»¶ï¼š
     - ESLint
     - Prettier
     - Python
     - Docker
     - GitLens
     - Error Lens
     - Thunder Client (APIæµ‹è¯•)
   - [ ] é…ç½®ä»£ç æ ¼å¼åŒ–è§„åˆ™
   - [ ] é…ç½®Gité’©å­ï¼ˆpre-commitï¼‰

3. **æœ¬åœ°æœåŠ¡å¯åŠ¨** (2h)
   - [ ] ä½¿ç”¨Dockerå¯åŠ¨PostgreSQL
   - [ ] ä½¿ç”¨Dockerå¯åŠ¨Redis
   - [ ] ä½¿ç”¨Dockerå¯åŠ¨RabbitMQ
   - [ ] ä½¿ç”¨Dockerå¯åŠ¨MinIO
   - [ ] éªŒè¯æ‰€æœ‰æœåŠ¡æ­£å¸¸è¿è¡Œ

4. **å¼€å‘å·¥å…·é…ç½®** (2h)
   - [ ] é…ç½®Postman/Thunder Client APIé›†åˆ
   - [ ] å®‰è£…æ•°æ®åº“ç®¡ç†å·¥å…·ï¼ˆDBeaver/pgAdminï¼‰
   - [ ] é…ç½®Redis Desktop Manager
   - [ ] å®‰è£…å¹¶é…ç½®Prettierã€ESLint

**äº¤ä»˜ç‰©**:
- ç¯å¢ƒæ­å»ºæ–‡æ¡£ (markdown)
- Docker Composeé…ç½®æ–‡ä»¶
- VSCodeé…ç½®æ–‡ä»¶ (.vscodeç›®å½•)

**éªŒæ”¶æ ‡å‡†**:
- æ‰€æœ‰å¼€å‘å·¥å…·æ­£å¸¸è¿è¡Œ
- èƒ½å¤Ÿè¿æ¥åˆ°æœ¬åœ°æ•°æ®åº“
- ä»£ç æ ¼å¼åŒ–å’Œæ£€æŸ¥æ­£å¸¸å·¥ä½œ

---

### ä»»åŠ¡ 0.2: ä»£ç ä»“åº“åˆå§‹åŒ–

**è´Ÿè´£äºº**: DevOpså·¥ç¨‹å¸ˆ + åç«¯è´Ÿè´£äºº
**å·¥æ—¶**: 6å°æ—¶
**ä¾èµ–**: ä»»åŠ¡0.1

**è¯¦ç»†æ­¥éª¤**:

1. **åˆ›å»ºGitä»“åº“** (1h)
   - [ ] åœ¨GitLab/GitHubåˆ›å»ºé¡¹ç›®ä»“åº“
   - [ ] é…ç½®ä»“åº“æƒé™å’Œåˆ†æ”¯ä¿æŠ¤è§„åˆ™
   - [ ] åˆ›å»ºdevelopã€stagingã€productionåˆ†æ”¯
   - [ ] é…ç½®.gitignoreæ–‡ä»¶

2. **å‰ç«¯é¡¹ç›®åˆå§‹åŒ–** (2h)
   - [ ] æ‰§è¡Œ `npm create vite@latest frontend -- --template react-ts`
   - [ ] æŒ‰ç…§01-é¡¹ç›®ç»“æ„è®¾è®¡.mdåˆ›å»ºç›®å½•ç»“æ„
   - [ ] å®‰è£…æ ¸å¿ƒä¾èµ–ï¼š
     ```bash
     npm install react-router-dom @mui/material @emotion/react @emotion/styled
     npm install @tanstack/react-query zustand react-hook-form zod
     npm install axios date-fns lodash-es
     npm install -D @types/lodash-es @vitejs/plugin-react
     ```
   - [ ] é…ç½®vite.config.tsï¼ˆè·¯å¾„åˆ«åã€ä»£ç†ç­‰ï¼‰
   - [ ] é…ç½®tsconfig.json
   - [ ] åˆ›å»ºåŸºç¡€ç›®å½•å’ŒREADME

3. **åç«¯é¡¹ç›®åˆå§‹åŒ–** (2h)
   - [ ] åˆ›å»ºbackendç›®å½•å¹¶åˆå§‹åŒ–Pythonè™šæ‹Ÿç¯å¢ƒ
   - [ ] æŒ‰ç…§01-é¡¹ç›®ç»“æ„è®¾è®¡.mdåˆ›å»ºç›®å½•ç»“æ„
   - [ ] åˆ›å»ºrequirementsç›®å½•å’Œä¾èµ–æ–‡ä»¶ï¼š
     - requirements/base.txt
     - requirements/dev.txt
     - requirements/prod.txt
   - [ ] å®‰è£…æ ¸å¿ƒä¾èµ–ï¼š
     ```bash
     pip install fastapi uvicorn sqlalchemy alembic asyncpg
     pip install redis python-jose passlib bcrypt
     pip install pydantic-settings python-multipart
     ```
   - [ ] é…ç½®pyproject.tomlå’Œsetup.py
   - [ ] åˆ›å»ºåŸºç¡€ç›®å½•å’ŒREADME

4. **é…ç½®æ–‡ä»¶åˆ›å»º** (1h)
   - [ ] åˆ›å»º.env.exampleæ–‡ä»¶ï¼ˆå‰åç«¯ï¼‰
   - [ ] åˆ›å»º.editorconfig
   - [ ] åˆ›å»º.prettierrcå’Œ.eslintrc
   - [ ] åˆ›å»ºdocker-compose.dev.yml
   - [ ] æäº¤åˆå§‹ä»£ç åˆ°ä»“åº“

**äº¤ä»˜ç‰©**:
- å®Œæ•´çš„å‰åç«¯é¡¹ç›®éª¨æ¶
- é…ç½®æ–‡ä»¶é›†åˆ
- ä¾èµ–æ–‡ä»¶ï¼ˆpackage.jsonã€requirements.txtï¼‰

**éªŒæ”¶æ ‡å‡†**:
- å‰ç«¯é¡¹ç›®èƒ½å¤Ÿè¿è¡Œ `npm run dev`
- åç«¯é¡¹ç›®èƒ½å¤Ÿè¿è¡Œ `uvicorn app.main:app`
- Gitä»“åº“é…ç½®æ­£ç¡®ï¼Œåˆ†æ”¯ç­–ç•¥æ¸…æ™°

---

### ä»»åŠ¡ 0.3: å›¢é˜Ÿåä½œå·¥å…·é…ç½®

**è´Ÿè´£äºº**: é¡¹ç›®ç»ç†
**å·¥æ—¶**: 4å°æ—¶
**ä¾èµ–**: æ— 

**è¯¦ç»†æ­¥éª¤**:

1. **é¡¹ç›®ç®¡ç†å·¥å…·** (1h)
   - [ ] åˆ›å»ºJira/Trelloé¡¹ç›®çœ‹æ¿
   - [ ] é…ç½®Sprintå’Œè¿­ä»£è®¡åˆ’
   - [ ] å¯¼å…¥å¼€å‘ä»»åŠ¡æ¸…å•
   - [ ] åˆ†é…ä»»åŠ¡ä¼˜å…ˆçº§

2. **æ–‡æ¡£åä½œ** (1h)
   - [ ] åˆ›å»ºConfluence/Notionç©ºé—´
   - [ ] ä¸Šä¼ æ¶æ„è®¾è®¡æ–‡æ¡£
   - [ ] åˆ›å»ºæŠ€æœ¯è§„èŒƒæ–‡æ¡£
   - [ ] åˆ›å»ºä¼šè®®çºªè¦æ¨¡æ¿

3. **æ²Ÿé€šå·¥å…·** (1h)
   - [ ] åˆ›å»ºSlack/é’‰é’‰/ä¼ä¸šå¾®ä¿¡ç¾¤ç»„
   - [ ] é…ç½®é¢‘é“ï¼š
     - #general (å…¨å‘˜)
     - #development (å¼€å‘è®¨è®º)
     - #devops (è¿ç»´å‘å¸ƒ)
     - #testing (æµ‹è¯•é—®é¢˜)
   - [ ] é…ç½®Gitæäº¤é€šçŸ¥
   - [ ] é…ç½®CI/CDé€šçŸ¥

4. **ä»£ç å®¡æŸ¥æµç¨‹** (1h)
   - [ ] é…ç½®GitLab/GitHub PRæ¨¡æ¿
   - [ ] è®¾ç½®ä»£ç å®¡æŸ¥è§„åˆ™ï¼ˆè‡³å°‘1äººå®¡æŸ¥ï¼‰
   - [ ] é…ç½®CI/CDæµç¨‹ï¼ˆä»£ç æ£€æŸ¥ã€æµ‹è¯•ï¼‰
   - [ ] åŸ¹è®­å›¢é˜Ÿæˆå‘˜PRæµç¨‹

**äº¤ä»˜ç‰©**:
- é¡¹ç›®ç®¡ç†çœ‹æ¿
- æ–‡æ¡£åä½œç©ºé—´
- å›¢é˜Ÿæ²Ÿé€šæ¸ é“
- PRæ¨¡æ¿å’Œè§„èŒƒæ–‡æ¡£

**éªŒæ”¶æ ‡å‡†**:
- æ‰€æœ‰å›¢é˜Ÿæˆå‘˜èƒ½å¤Ÿè®¿é—®åä½œå·¥å…·
- Gitæäº¤èƒ½è§¦å‘é€šçŸ¥
- PRæµç¨‹èƒ½å¤Ÿæ­£å¸¸è¿ä½œ

---

## é˜¶æ®µ1ï¼šåŸºç¡€è®¾æ–½æ­å»º (ç¬¬2-3å‘¨)

**ç›®æ ‡**: å®Œæˆæ•°æ®åº“ã€è®¤è¯ç³»ç»Ÿã€åŸºç¡€é…ç½®ç­‰æ ¸å¿ƒåŸºç¡€è®¾æ–½

### ä»»åŠ¡ 1.1: æ•°æ®åº“åˆå§‹åŒ–

**è´Ÿè´£äºº**: åç«¯å·¥ç¨‹å¸ˆ (æ•°æ®åº“ä¸“å‘˜)
**å·¥æ—¶**: 16å°æ—¶
**ä¼˜å…ˆçº§**: P0

**è¯¦ç»†æ­¥éª¤**:

1. **æ•°æ®åº“åˆ›å»º** (2h)
   - [ ] åˆ›å»ºPostgreSQLæ•°æ®åº“ `aibidcomposer`
   - [ ] åˆ›å»ºæ•°æ®åº“ç”¨æˆ·å’Œæƒé™
   - [ ] é…ç½®è¿æ¥æ± å‚æ•°
   - [ ] å¯ç”¨å¿…è¦çš„æ‰©å±•ï¼š
     ```sql
     CREATE EXTENSION IF NOT EXISTS "uuid-ossp";
     CREATE EXTENSION IF NOT EXISTS "pg_trgm";
     CREATE EXTENSION IF NOT EXISTS "btree_gin";
     ```

2. **æ‰§è¡Œæ•°æ®åº“Schema** (6h)
   - [ ] ä»02-æ•°æ®åº“è®¾è®¡.mdæå–æ‰€æœ‰å»ºè¡¨SQL
   - [ ] æŒ‰é¡ºåºæ‰§è¡Œï¼š
     - ç”¨æˆ·ä¸æƒé™åŸŸï¼ˆ6å¼ è¡¨ï¼‰
     - é¡¹ç›®åŸŸï¼ˆ4å¼ è¡¨ï¼‰
     - æ ‡ä¹¦åŸŸï¼ˆ4å¼ è¡¨ï¼‰
     - æ¨¡æ¿åŸŸï¼ˆ3å¼ è¡¨ï¼‰
     - ä¼ä¸šèƒ½åŠ›åŸŸï¼ˆ7å¼ è¡¨ï¼‰
     - AIæœåŠ¡åŸŸï¼ˆ3å¼ è¡¨ï¼‰
     - åä½œåŸŸï¼ˆ2å¼ è¡¨ï¼‰
     - å®¡æ‰¹åŸŸï¼ˆ3å¼ è¡¨ï¼‰
     - å®¡è®¡æ—¥å¿—åŸŸï¼ˆ2å¼ è¡¨ï¼‰
   - [ ] éªŒè¯æ‰€æœ‰è¡¨åˆ›å»ºæˆåŠŸ
   - [ ] éªŒè¯æ‰€æœ‰å¤–é”®çº¦æŸæ­£ç¡®

3. **åˆ›å»ºç´¢å¼•** (3h)
   - [ ] åˆ›å»ºæ‰€æœ‰æ€§èƒ½ä¼˜åŒ–ç´¢å¼•ï¼ˆ150+ï¼‰
   - [ ] åˆ›å»ºå…¨æ–‡æœç´¢ç´¢å¼•ï¼ˆGINç´¢å¼•ï¼‰
   - [ ] éªŒè¯ç´¢å¼•åˆ›å»ºæˆåŠŸ
   - [ ] ä½¿ç”¨EXPLAINåˆ†ææŸ¥è¯¢è®¡åˆ’

4. **åˆ›å»ºè§¦å‘å™¨å’Œå‡½æ•°** (3h)
   - [ ] åˆ›å»ºupdated_atè‡ªåŠ¨æ›´æ–°è§¦å‘å™¨ï¼ˆ33ä¸ªï¼‰
   - [ ] åˆ›å»ºå®¡è®¡æ—¥å¿—è§¦å‘å™¨
   - [ ] åˆ›å»ºè½¯åˆ é™¤ç›¸å…³å‡½æ•°
   - [ ] æµ‹è¯•è§¦å‘å™¨åŠŸèƒ½

5. **åˆå§‹åŒ–æ•°æ®** (2h)
   - [ ] æ’å…¥ç³»ç»Ÿè§’è‰²ï¼ˆè¶…çº§ç®¡ç†å‘˜ã€ç®¡ç†å‘˜ã€æ™®é€šç”¨æˆ·ï¼‰
   - [ ] æ’å…¥åŸºç¡€æƒé™æ•°æ®
   - [ ] åˆ›å»ºæµ‹è¯•ç»„ç»‡
   - [ ] åˆ›å»ºæµ‹è¯•ç”¨æˆ·ï¼ˆadmin@example.comï¼‰
   - [ ] æ’å…¥AI Promptæ¨¡æ¿åˆå§‹æ•°æ®

**äº¤ä»˜ç‰©**:
- å®Œæ•´çš„æ•°æ®åº“åˆå§‹åŒ–SQLè„šæœ¬
- æ•°æ®åº“è¿ç§»æ–‡ä»¶ï¼ˆAlembicï¼‰
- æµ‹è¯•æ•°æ®è„šæœ¬
- æ•°æ®åº“æ–‡æ¡£

**éªŒæ”¶æ ‡å‡†**:
- æ‰€æœ‰33å¼ è¡¨åˆ›å»ºæˆåŠŸ
- æ‰€æœ‰ç´¢å¼•åˆ›å»ºæˆåŠŸ
- è§¦å‘å™¨æ­£å¸¸å·¥ä½œ
- èƒ½å¤Ÿä½¿ç”¨æµ‹è¯•è´¦æˆ·ç™»å½•

---

### ä»»åŠ¡ 1.2: Alembicæ•°æ®åº“è¿ç§»é…ç½®

**è´Ÿè´£äºº**: åç«¯å·¥ç¨‹å¸ˆ
**å·¥æ—¶**: 8å°æ—¶
**ä¾èµ–**: ä»»åŠ¡1.1

**è¯¦ç»†æ­¥éª¤**:

1. **Alembicåˆå§‹åŒ–** (2h)
   - [ ] å®‰è£…Alembic: `pip install alembic`
   - [ ] åˆå§‹åŒ–Alembic: `alembic init alembic`
   - [ ] é…ç½®alembic.ini
   - [ ] é…ç½®env.pyè¿æ¥æ•°æ®åº“

2. **åˆ›å»ºSQLAlchemyæ¨¡å‹** (4h)
   - [ ] åœ¨app/models/ç›®å½•åˆ›å»ºæ‰€æœ‰33ä¸ªæ¨¡å‹ï¼š
     - user.py
     - organization.py
     - role.py
     - permission.py
     - project.py
     - bid_document.py
     - template.py
     - company_profile.py
     - ai_task.py
     - collaboration.py
     - approval.py
     - audit_log.py
   - [ ] å®šä¹‰æ‰€æœ‰å­—æ®µå’Œå…³ç³»
   - [ ] æ·»åŠ __repr__æ–¹æ³•
   - [ ] æ·»åŠ to_dictæ–¹æ³•

3. **ç”Ÿæˆè¿ç§»æ–‡ä»¶** (1h)
   - [ ] æ‰§è¡Œ `alembic revision --autogenerate -m "Initial schema"`
   - [ ] æ£€æŸ¥ç”Ÿæˆçš„è¿ç§»æ–‡ä»¶
   - [ ] ä¿®æ­£è‡ªåŠ¨ç”Ÿæˆçš„é—®é¢˜ï¼ˆå¦‚æœ‰ï¼‰
   - [ ] æ·»åŠ ç´¢å¼•å’Œçº¦æŸ

4. **æµ‹è¯•è¿ç§»** (1h)
   - [ ] åœ¨æµ‹è¯•æ•°æ®åº“æ‰§è¡Œ `alembic upgrade head`
   - [ ] éªŒè¯æ‰€æœ‰è¡¨åˆ›å»ºæ­£ç¡®
   - [ ] æµ‹è¯•å›æ»š `alembic downgrade -1`
   - [ ] éªŒè¯è¿ç§»è„šæœ¬æ­£ç¡®æ€§

**äº¤ä»˜ç‰©**:
- 33ä¸ªSQLAlchemyæ¨¡å‹æ–‡ä»¶
- Alembicé…ç½®æ–‡ä»¶
- åˆå§‹è¿ç§»è„šæœ¬
- è¿ç§»æµ‹è¯•æŠ¥å‘Š

**éªŒæ”¶æ ‡å‡†**:
- æ‰€æœ‰æ¨¡å‹å®šä¹‰æ­£ç¡®
- è¿ç§»èƒ½å¤ŸæˆåŠŸæ‰§è¡Œå’Œå›æ»š
- æ¨¡å‹å…³ç³»æ­£ç¡®æ˜ å°„

---

### ä»»åŠ¡ 1.3: åç«¯æ ¸å¿ƒé…ç½®

**è´Ÿè´£äºº**: åç«¯å·¥ç¨‹å¸ˆ
**å·¥æ—¶**: 12å°æ—¶
**ä¾èµ–**: ä»»åŠ¡1.2

**è¯¦ç»†æ­¥éª¤**:

1. **åˆ›å»ºæ ¸å¿ƒé…ç½®** (3h)
   - [ ] åˆ›å»ºapp/core/config.py:
     ```python
     from pydantic_settings import BaseSettings

     class Settings(BaseSettings):
         # åº”ç”¨é…ç½®
         APP_NAME: str = "AIBidComposer"
         DEBUG: bool = False
         API_VERSION: str = "v1"

         # æ•°æ®åº“é…ç½®
         DATABASE_URL: str
         DATABASE_POOL_SIZE: int = 20

         # Redisé…ç½®
         REDIS_URL: str

         # JWTé…ç½®
         SECRET_KEY: str
         ALGORITHM: str = "HS256"
         ACCESS_TOKEN_EXPIRE_MINUTES: int = 30
         REFRESH_TOKEN_EXPIRE_DAYS: int = 7

         # CORSé…ç½®
         ALLOWED_ORIGINS: list[str] = ["http://localhost:5173"]

         # AIé…ç½®
         OPENAI_API_KEY: str
         ANTHROPIC_API_KEY: str
         PINECONE_API_KEY: str

         class Config:
             env_file = ".env"

     settings = Settings()
     ```
   - [ ] åˆ›å»º.envæ–‡ä»¶æ¨¡æ¿
   - [ ] é…ç½®ç¯å¢ƒå˜é‡åŠ è½½

2. **æ•°æ®åº“è¿æ¥æ± ** (2h)
   - [ ] åˆ›å»ºapp/db/session.py:
     ```python
     from sqlalchemy.ext.asyncio import create_async_engine, AsyncSession
     from sqlalchemy.orm import sessionmaker

     engine = create_async_engine(
         settings.DATABASE_URL,
         echo=settings.DEBUG,
         pool_size=settings.DATABASE_POOL_SIZE,
         max_overflow=40,
     )

     async_session_maker = sessionmaker(
         engine, class_=AsyncSession, expire_on_commit=False
     )

     async def get_db() -> AsyncSession:
         async with async_session_maker() as session:
             yield session
     ```
   - [ ] é…ç½®è¿æ¥æ± å‚æ•°
   - [ ] æ·»åŠ è¿æ¥æ± ç›‘æ§

3. **Redisè¿æ¥** (2h)
   - [ ] åˆ›å»ºapp/core/redis.py:
     ```python
     import redis.asyncio as redis

     class RedisClient:
         def __init__(self):
             self.redis = None

         async def connect(self):
             self.redis = await redis.from_url(
                 settings.REDIS_URL,
                 encoding="utf-8",
                 decode_responses=True
             )

         async def close(self):
             await self.redis.close()

         async def get(self, key: str):
             return await self.redis.get(key)

         async def set(self, key: str, value: str, expire: int = None):
             await self.redis.set(key, value, ex=expire)

     redis_client = RedisClient()
     ```
   - [ ] æµ‹è¯•Redisè¿æ¥

4. **æ—¥å¿—é…ç½®** (2h)
   - [ ] åˆ›å»ºapp/core/logging.py:
     ```python
     import logging
     from logging.handlers import RotatingFileHandler

     def setup_logging():
         logger = logging.getLogger("aibidcomposer")
         logger.setLevel(logging.INFO)

         # æ–‡ä»¶å¤„ç†å™¨
         file_handler = RotatingFileHandler(
             "logs/app.log",
             maxBytes=10485760,  # 10MB
             backupCount=10
         )

         # æ ¼å¼åŒ–
         formatter = logging.Formatter(
             '%(asctime)s - %(name)s - %(levelname)s - %(message)s'
         )
         file_handler.setFormatter(formatter)
         logger.addHandler(file_handler)

         return logger

     logger = setup_logging()
     ```
   - [ ] é…ç½®æ—¥å¿—è½®è½¬
   - [ ] é…ç½®ä¸åŒçº§åˆ«çš„æ—¥å¿—

5. **ä¸­é—´ä»¶é…ç½®** (3h)
   - [ ] åˆ›å»ºCORSä¸­é—´ä»¶
   - [ ] åˆ›å»ºè¯·æ±‚æ—¥å¿—ä¸­é—´ä»¶
   - [ ] åˆ›å»ºé”™è¯¯å¤„ç†ä¸­é—´ä»¶:
     ```python
     from fastapi import Request, status
     from fastapi.responses import JSONResponse

     async def error_handler_middleware(request: Request, call_next):
         try:
             return await call_next(request)
         except Exception as exc:
             logger.error(f"Unhandled error: {exc}", exc_info=True)
             return JSONResponse(
                 status_code=status.HTTP_500_INTERNAL_SERVER_ERROR,
                 content={
                     "success": False,
                     "error": {
                         "code": "INTERNAL_SERVER_ERROR",
                         "message": "An internal error occurred"
                     }
                 }
             )
     ```
   - [ ] åˆ›å»ºæ€§èƒ½ç›‘æ§ä¸­é—´ä»¶

**äº¤ä»˜ç‰©**:
- æ ¸å¿ƒé…ç½®æ–‡ä»¶
- æ•°æ®åº“è¿æ¥æ± 
- Rediså®¢æˆ·ç«¯
- æ—¥å¿—ç³»ç»Ÿ
- ä¸­é—´ä»¶é›†åˆ

**éªŒæ”¶æ ‡å‡†**:
- é…ç½®æ–‡ä»¶èƒ½å¤Ÿæ­£ç¡®åŠ è½½
- æ•°æ®åº“è¿æ¥æ± æ­£å¸¸å·¥ä½œ
- Redisè¿æ¥æ­£å¸¸
- æ—¥å¿—èƒ½å¤Ÿæ­£ç¡®è®°å½•
- ä¸­é—´ä»¶æ­£å¸¸æ‹¦æˆªè¯·æ±‚

---

### ä»»åŠ¡ 1.4: FastAPIåº”ç”¨åˆå§‹åŒ–

**è´Ÿè´£äºº**: åç«¯å·¥ç¨‹å¸ˆ
**å·¥æ—¶**: 8å°æ—¶
**ä¾èµ–**: ä»»åŠ¡1.3

**è¯¦ç»†æ­¥éª¤**:

1. **åˆ›å»ºä¸»åº”ç”¨** (2h)
   - [ ] åˆ›å»ºapp/main.py:
     ```python
     from fastapi import FastAPI
     from fastapi.middleware.cors import CORSMiddleware
     from app.core.config import settings
     from app.api.v1 import api_router

     app = FastAPI(
         title=settings.APP_NAME,
         version=settings.API_VERSION,
         docs_url="/docs",
         redoc_url="/redoc"
     )

     # CORS
     app.add_middleware(
         CORSMiddleware,
         allow_origins=settings.ALLOWED_ORIGINS,
         allow_credentials=True,
         allow_methods=["*"],
         allow_headers=["*"],
     )

     # åŒ…å«è·¯ç”±
     app.include_router(api_router, prefix="/api/v1")

     @app.get("/health")
     async def health_check():
         return {"status": "healthy"}

     @app.on_event("startup")
     async def startup_event():
         await redis_client.connect()

     @app.on_event("shutdown")
     async def shutdown_event():
         await redis_client.close()
     ```

2. **åˆ›å»ºAPIè·¯ç”±ç»“æ„** (3h)
   - [ ] åˆ›å»ºapp/api/v1/api.py:
     ```python
     from fastapi import APIRouter
     from app.api.v1.endpoints import (
         auth, projects, documents, templates,
         ai, capabilities, collaboration, approval
     )

     api_router = APIRouter()

     api_router.include_router(auth.router, prefix="/auth", tags=["è®¤è¯"])
     api_router.include_router(projects.router, prefix="/projects", tags=["é¡¹ç›®"])
     api_router.include_router(documents.router, prefix="/documents", tags=["æ–‡æ¡£"])
     # ... å…¶ä»–è·¯ç”±
     ```
   - [ ] åˆ›å»ºå„ä¸ªendpointæ–‡ä»¶ï¼ˆç©ºå®ç°ï¼‰
   - [ ] é…ç½®è·¯ç”±å‰ç¼€å’Œæ ‡ç­¾

3. **åˆ›å»ºç»Ÿä¸€å“åº”æ¨¡å‹** (2h)
   - [ ] åˆ›å»ºapp/schemas/response.py:
     ```python
     from typing import Generic, TypeVar, Optional
     from pydantic import BaseModel

     T = TypeVar("T")

     class Response(BaseModel, Generic[T]):
         success: bool = True
         data: Optional[T] = None
         error: Optional[dict] = None

     class PaginatedResponse(BaseModel, Generic[T]):
         success: bool = True
         data: list[T]
         pagination: dict
     ```
   - [ ] åˆ›å»ºé”™è¯¯å“åº”æ¨¡å‹
   - [ ] åˆ›å»ºåˆ†é¡µå“åº”æ¨¡å‹

4. **é…ç½®OpenAPIæ–‡æ¡£** (1h)
   - [ ] é…ç½®Swagger UIä¸»é¢˜
   - [ ] æ·»åŠ APIæ–‡æ¡£æè¿°
   - [ ] é…ç½®è®¤è¯ç¤ºä¾‹
   - [ ] æµ‹è¯•APIæ–‡æ¡£è®¿é—®

**äº¤ä»˜ç‰©**:
- FastAPIä¸»åº”ç”¨
- APIè·¯ç”±ç»“æ„
- ç»Ÿä¸€å“åº”æ¨¡å‹
- OpenAPIæ–‡æ¡£é…ç½®

**éªŒæ”¶æ ‡å‡†**:
- åº”ç”¨èƒ½å¤Ÿå¯åŠ¨: `uvicorn app.main:app --reload`
- èƒ½å¤Ÿè®¿é—® http://localhost:8000/docs
- Health checkç«¯ç‚¹æ­£å¸¸: GET /health
- APIæ–‡æ¡£æ˜¾ç¤ºæ­£ç¡®

## ğŸ”— ç›¸å…³æ–‡æ¡£

- **å¼€å‘è®¡åˆ’æ€»è§ˆ**: [00-å¼€å‘è®¡åˆ’æ€»è§ˆ.md](./00-å¼€å‘è®¡åˆ’æ€»è§ˆ.md)
- **åç«¯å¼€å‘é˜¶æ®µ**: [02-åç«¯å¼€å‘é˜¶æ®µ.md](./02-åç«¯å¼€å‘é˜¶æ®µ.md)
- **å‰ç«¯å¼€å‘é˜¶æ®µ**: [03-å‰ç«¯å¼€å‘é˜¶æ®µ.md](./03-å‰ç«¯å¼€å‘é˜¶æ®µ.md)

## ä¿®æ”¹å†å²

| æ—¥æœŸ | ç‰ˆæœ¬ | ä¿®æ”¹è€… | ä¿®æ”¹å†…å®¹æ¦‚è¦ |
|------|------|--------|-------------|
| 2025-11-29 | 1.0 | claude-sonnet-4-5 (claude-sonnet-4-5-20250929) | ä»å¼€å‘è®¡åˆ’ä¸è·¯çº¿å›¾.mdæ‹†åˆ†åˆ›å»ºå‡†å¤‡ä¸åŸºç¡€è®¾æ–½é˜¶æ®µæ–‡æ¡£ |

---

**æ–‡æ¡£ç‰ˆæœ¬**: v1.0
**åˆ›å»ºæ—¶é—´**: 2025å¹´11æœˆ29æ—¥
**æ–‡æ¡£çŠ¶æ€**: âœ… å·²æ‰¹å‡†

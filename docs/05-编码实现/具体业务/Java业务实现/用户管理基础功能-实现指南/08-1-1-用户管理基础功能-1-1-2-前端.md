# Java Spring Boot 服务任务详细计划 - JAVA-001 Part1 - 1.1 用户管理基础功能 - 1.1.2 前端

#### 用户管理页面（ProTable）

```typescript
// frontend/src/pages/User/UserList.tsx
import React, { useRef } from 'react';
import { ProTable, ProColumns, ActionType } from '@ant-design/pro-components';
import { Button, Tag, Space, message, Modal } from 'antd';
import { PlusOutlined, EditOutlined, DeleteOutlined, LockOutlined, UnlockOutlined } from '@ant-design/icons';
import { UserResponse, UserStatus } from '@/services/user';
import { userService } from '@/services/user.service';

/**
 * 用户列表页面
 * 需求编号: REQ-JAVA-001
 */
const UserList: React.FC = () => {
  const actionRef = useRef<ActionType>();

  const columns: ProColumns<UserResponse>[] = [
    {
      title: '用户名',
      dataIndex: 'username',
      copyable: true,
      ellipsis: true,
      width: 150,
    },
    {
      title: '邮箱',
      dataIndex: 'email',
      copyable: true,
      ellipsis: true,
      width: 200,
    },
    {
      title: '全名',
      dataIndex: 'fullName',
      ellipsis: true,
      hideInSearch: true,
      width: 150,
    },
    {
      title: '手机',
      dataIndex: 'phone',
      hideInSearch: true,
      width: 120,
    },
    {
      title: '状态',
      dataIndex: 'status',
      valueType: 'select',
      valueEnum: {
        'ACTIVE': { text: '活跃', status: 'Success' },
        'INACTIVE': { text: '未激活', status: 'Warning' },
        'SUSPENDED': { text: '已暂停', status: 'Error' },
      },
      width: 100,
      render: (_, record) => {
        const statusMap = {
          ACTIVE: { color: 'success', text: '活跃' },
          INACTIVE: { color: 'warning', text: '未激活' },
          SUSPENDED: { color: 'error', text: '已暂停' },
        };
        const status = statusMap[record.status] || { color: 'default', text: record.status };
        return <Tag color={status.color}>{status.text}</Tag>;
      },
    },
    {
      title: '邮箱验证',
      dataIndex: 'emailVerified',
      valueType: 'select',
      valueEnum: {
        true: { text: '已验证', status: 'Success' },
        false: { text: '未验证', status: 'Default' },
      },
      hideInSearch: true,
      width: 100,
      render: (_, record) => (
        <Tag color={record.emailVerified ? 'success' : 'default'}>
          {record.emailVerified ? '已验证' : '未验证'}
        </Tag>
      ),
    },
    {
      title: '登录次数',
      dataIndex: 'loginCount',
      hideInSearch: true,
      sorter: true,
      width: 100,
    },
    {
      title: '最后登录',
      dataIndex: 'lastLoginAt',
      valueType: 'dateTime',
      hideInSearch: true,
      width: 180,
    },
    {
      title: '组织',
      dataIndex: 'organizationName',
      ellipsis: true,
      hideInSearch: true,
      width: 150,
    },
    {
      title: '创建时间',
      dataIndex: 'createdAt',
      valueType: 'dateTime',
      hideInSearch: true,
      sorter: true,
      width: 180,
    },
    {
      title: '操作',
      valueType: 'option',
      width: 200,
      fixed: 'right',
      render: (text, record, _, action) => [
        <a
          key="edit"
          onClick={() => {
            // TODO: 打开编辑对话框
            message.info('编辑用户功能待实现');
          }}
        >
          <EditOutlined /> 编辑
        </a>,
        <a
          key="suspend"
          onClick={async () => {
            const newStatus = record.status === 'ACTIVE' ? 'SUSPENDED' : 'ACTIVE';
            try {
              await userService.updateUserStatus(record.id, newStatus);
              message.success(`用户已${newStatus === 'SUSPENDED' ? '暂停' : '激活'}`);
              action?.reload();
            } catch (error) {
              message.error('操作失败');
            }
          }}
        >
          {record.status === 'ACTIVE' ? <LockOutlined /> : <UnlockOutlined />}
          {record.status === 'ACTIVE' ? '暂停' : '激活'}
        </a>,
        <a
          key="delete"
          onClick={() => {
            Modal.confirm({
              title: '确认删除',
              content: `确定要删除用户 "${record.username}" 吗？`,
              okText: '确认',
              cancelText: '取消',
              okButtonProps: { danger: true },
              onOk: async () => {
                try {
                  await userService.deleteUser(record.id);
                  message.success('用户已删除');
                  action?.reload();
                } catch (error) {
                  message.error('删除失败');
                }
              },
            });
          }}
        >
          <DeleteOutlined /> 删除
        </a>,
      ],
    },
  ];

  return (
    <ProTable<UserResponse>
      columns={columns}
      actionRef={actionRef}
      cardBordered
      request={async (params, sort, filter) => {
        // 调用API获取用户列表
        const response = await userService.getUsers({
          page: params.current || 1,
          pageSize: params.pageSize || 20,
          username: params.username,
          email: params.email,
          status: params.status,
          sortBy: sort && Object.keys(sort)[0],
          sortOrder: sort && Object.values(sort)[0] === 'ascend' ? 'asc' : 'desc',
        });

        return {
          data: response.data.items,
          success: response.success,
          total: response.data.total,
        };
      }}
      rowKey="id"
      search={{
        labelWidth: 'auto',
      }}
      options={{
        setting: {
          listsHeight: 400,
        },
      }}
      pagination={{
        pageSize: 20,
        showSizeChanger: true,
        showQuickJumper: true,
      }}
      dateFormatter="string"
      headerTitle="用户列表"
      toolBarRender={() => [
        <Button
          key="button"
          icon={<PlusOutlined />}
          onClick={() => {
            // TODO: 打开创建用户对话框
            message.info('创建用户功能待实现');
          }}
          type="primary"
        >
          新建用户
        </Button>,
      ]}
    />
  );
};

export default UserList;
```

#### 用户服务（API Client）

```typescript
// frontend/src/services/user.service.ts
import axios from 'axios';

/**
 * 用户响应接口
 */
export interface UserResponse {
  id: string;
  email: string;
  username: string;
  fullName: string;
  phone: string;
  avatarUrl: string;
  status: 'ACTIVE' | 'INACTIVE' | 'SUSPENDED';
  emailVerified: boolean;
  phoneVerified: boolean;
  lastLoginAt: string;
  loginCount: number;
  organizationId: string;
  organizationName: string;
  settings: Record<string, any>;
  createdAt: string;
  updatedAt: string;
}

/**
 * 分页响应接口
 */
export interface PaginatedResponse<T> {
  success: boolean;
  data: {
    items: T[];
    total: number;
    page: number;
    pageSize: number;
    totalPages: number;
  };
  message?: string;
  timestamp: string;
}

/**
 * 用户列表查询参数
 */
export interface GetUsersParams {
  page?: number;
  pageSize?: number;
  username?: string;
  email?: string;
  status?: string;
  sortBy?: string;
  sortOrder?: 'asc' | 'desc';
}

/**
 * 用户服务类
 */
class UserService {
  private baseURL = 'http://localhost:8080/api/v1';

  /**
   * 获取用户列表
   */
  async getUsers(params: GetUsersParams): Promise<PaginatedResponse<UserResponse>> {
    const response = await axios.get<PaginatedResponse<UserResponse>>(
      `${this.baseURL}/users`,
      { params }
    );
    return response.data;
  }

  /**
   * 获取用户详情
   */
  async getUserById(id: string): Promise<UserResponse> {
    const response = await axios.get<{ success: boolean; data: UserResponse }>(
      `${this.baseURL}/users/${id}`
    );
    return response.data.data;
  }

  /**
   * 更新用户状态
   */
  async updateUserStatus(id: string, status: string): Promise<void> {
    await axios.patch(`${this.baseURL}/users/${id}/status`, { status });
  }

  /**
   * 删除用户
   */
  async deleteUser(id: string): Promise<void> {
    await axios.delete(`${this.baseURL}/users/${id}`);
  }
}

export const userService = new UserService();
```

**验证标准**:
- [ ] ProTable 组件正确渲染用户列表
- [ ] 分页、排序、筛选功能正常工作
- [ ] 状态标签颜色正确（活跃=绿色、暂停=红色）
- [ ] 操作按钮功能正常（编辑、暂停/激活、删除）
- [ ] API 调用成功返回数据
- [ ] 错误处理和提示信息正确显示

# AIæ ‡ä¹¦æ™ºèƒ½åˆ›ä½œå¹³å° - æ•°æ®æ¨¡å‹ä¸APIæ¥å£ - ğŸ“Š æ•°æ®æ¨¡å‹è®¾è®¡

### æ ¸å¿ƒå®ä½“å…³ç³»å›¾
```mermaid
erDiagram
    companies ||--o{ users : "æ‹¥æœ‰"
    companies ||--o{ projects : "åˆ›å»º"
    companies ||--o{ templates : "æ‹¥æœ‰"
    companies ||--o{ enterprise_capabilities : "å…·å¤‡"

    users ||--o{ projects : "åˆ›å»º"
    users ||--o{ project_members : "å‚ä¸"
    users ||--o{ documents : "åˆ›å»º"
    users ||--o{ ai_assistants : "é…ç½®"

    projects ||--o{ project_members : "åŒ…å«"
    projects ||--o{ documents : "åŒ…å«"
    projects ||--o{ project_workflow : "æ‰§è¡Œ"

    templates ||--o{ documents : "åŸºäº"
    templates ||--o{ template_versions : "ç‰ˆæœ¬"

    documents ||--o{ document_versions : "ç‰ˆæœ¬"
    documents ||--o{ document_comments : "è¯„è®º"
    documents ||--o{ document_approvals : "å®¡æ‰¹"

    enterprise_capabilities ||--o{ capability_tags : "æ ‡ç­¾"
    enterprise_capabilities ||--o{ capability_cases : "æ¡ˆä¾‹"
```

### è¯¦ç»†æ•°æ®æ¨¡å‹

#### 1. ç”¨æˆ·å’Œæƒé™æ¨¡å‹
```typescript
// ç”¨æˆ·ç›¸å…³æ•°æ®æ¨¡å‹
interface User {
  id: string;                    // UUID
  company_id: string;            // ä¼ä¸šID
  username: string;              // ç”¨æˆ·å
  email: string;                 // é‚®ç®±
  password_hash: string;         // å¯†ç å“ˆå¸Œ
  full_name: string;             // å…¨å
  avatar_url?: string;           // å¤´åƒURL
  phone?: string;                // ç”µè¯
  department?: string;           // éƒ¨é—¨
  position?: string;             // èŒä½
  bio?: string;                  // ä¸ªäººç®€ä»‹
  expertise: string[];           // ä¸“ä¸šæŠ€èƒ½
  languages: Record<string, number>; // è¯­è¨€èƒ½åŠ›
  role: UserRole;                // ç”¨æˆ·è§’è‰²
  permissions: Permission[];     // æƒé™åˆ—è¡¨
  is_active: boolean;            // æ˜¯å¦æ¿€æ´»
  is_verified: boolean;          // æ˜¯å¦éªŒè¯
  is_online: boolean;            // åœ¨çº¿çŠ¶æ€
  last_login_at?: Date;          // æœ€åç™»å½•æ—¶é—´
  login_count: number;           // ç™»å½•æ¬¡æ•°
  timezone: string;              // æ—¶åŒº
  language: string;              // è¯­è¨€
  theme: ThemeType;              // ä¸»é¢˜
  notification_settings: NotificationSettings; // é€šçŸ¥è®¾ç½®
  created_at: Date;              // åˆ›å»ºæ—¶é—´
  updated_at: Date;              // æ›´æ–°æ—¶é—´
}

// ç”¨æˆ·è§’è‰²æšä¸¾
enum UserRole {
  SUPER_ADMIN = 'super_admin',
  ADMIN = 'admin',
  MANAGER = 'manager',
  EDITOR = 'editor',
  REVIEWER = 'reviewer',
  VIEWER = 'viewer',
  USER = 'user'
}

// æƒé™å®šä¹‰
interface Permission {
  resource: string;              // èµ„æºç±»å‹
  action: string;                // æ“ä½œç±»å‹
  conditions?: Record<string, any>; // æ¡ä»¶é™åˆ¶
}

// é€šçŸ¥è®¾ç½®
interface NotificationSettings {
  email: boolean;                // é‚®ä»¶é€šçŸ¥
  push: boolean;                 // æ¨é€é€šçŸ¥
  sms: boolean;                  // çŸ­ä¿¡é€šçŸ¥
  project_updates: boolean;      // é¡¹ç›®æ›´æ–°
  deadline_reminders: boolean;   // æˆªæ­¢æ—¥æœŸæé†’
  ai_recommendations: boolean;   // AIæ¨è
  system_updates: boolean;       // ç³»ç»Ÿæ›´æ–°
}

// ä¼ä¸šæ¨¡å‹
interface Company {
  id: string;                    // UUID
  name: string;                  // ä¼ä¸šåç§°
  display_name: string;          // æ˜¾ç¤ºåç§°
  description?: string;          // æè¿°
  industry: string;              // è¡Œä¸š
  company_size: CompanySize;     // ä¼ä¸šè§„æ¨¡
  website?: string;              // ç½‘ç«™
  logo_url?: string;             // Logo URL
  contact_email: string;         // è”ç³»é‚®ç®±
  contact_phone?: string;        // è”ç³»ç”µè¯
  address?: string;              // åœ°å€
  country: string;               // å›½å®¶
  region: string;                // åœ°åŒº
  city: string;                  // åŸå¸‚
  postal_code?: string;          // é‚®ç¼–
  established_year?: number;    // æˆç«‹å¹´ä»½
  annual_revenue?: number;       // å¹´æ”¶å…¥
  employee_count?: number;       // å‘˜å·¥æ•°
  subscription_tier: SubscriptionTier; // è®¢é˜…å±‚çº§
  subscription_status: SubscriptionStatus; // è®¢é˜…çŠ¶æ€
  subscription_expires_at?: Date; // è®¢é˜…è¿‡æœŸæ—¶é—´
  is_active: boolean;            // æ˜¯å¦æ¿€æ´»
  is_verified: boolean;          // æ˜¯å¦éªŒè¯
  created_at: Date;              // åˆ›å»ºæ—¶é—´
  updated_at: Date;              // æ›´æ–°æ—¶é—´
}

// ä¼ä¸šè§„æ¨¡æšä¸¾
enum CompanySize {
  STARTUP = 'startup',
  SMALL = 'small',
  MEDIUM = 'medium',
  LARGE = 'large',
  ENTERPRISE = 'enterprise'
}

// è®¢é˜…å±‚çº§
enum SubscriptionTier {
  BASIC = 'basic',
  PROFESSIONAL = 'professional',
  ENTERPRISE = 'enterprise',
  FLAGSHIP = 'flagship'
}

// è®¢é˜…çŠ¶æ€
enum SubscriptionStatus {
  ACTIVE = 'active',
  INACTIVE = 'inactive',
  SUSPENDED = 'suspended',
  CANCELLED = 'cancelled'
}
```

#### 2. é¡¹ç›®ç®¡ç†æ¨¡å‹
```typescript
// é¡¹ç›®æ¨¡å‹
interface Project {
  id: string;                    // UUID
  company_id: string;            // ä¼ä¸šID
  created_by: string;            // åˆ›å»ºè€…ID
  name: string;                  // é¡¹ç›®åç§°
  description?: string;          // é¡¹ç›®æè¿°
  project_number?: string;       // é¡¹ç›®ç¼–å·
  client_name: string;           // å®¢æˆ·åç§°
  client_industry?: string;      // å®¢æˆ·è¡Œä¸š
  project_type: ProjectType;     // é¡¹ç›®ç±»å‹
  project_category?: string;     // é¡¹ç›®åˆ†ç±»

  // æ‹›æ ‡ä¿¡æ¯
  tender_document_url?: string;  // æ‹›æ ‡æ–‡æ¡£URL
  tender_document_id?: string;   // æ‹›æ ‡æ–‡æ¡£ID
  submission_deadline?: Date;    // æäº¤æˆªæ­¢æ—¶é—´
  bid_opening_date?: Date;       // å¼€æ ‡æ—¶é—´
  budget_amount?: number;        // é¢„ç®—é‡‘é¢
  budget_currency: string;       // é¢„ç®—è´§å¸

  // é¡¹ç›®çŠ¶æ€
  status: ProjectStatus;         // é¡¹ç›®çŠ¶æ€
  priority: Priority;            // ä¼˜å…ˆçº§

  // é¡¹ç›®ä¿¡æ¯
  estimated_duration?: number;   // é¢„ä¼°å¤©æ•°
  actual_duration?: number;      // å®é™…å¤©æ•°
  team_size?: number;            // å›¢é˜Ÿè§„æ¨¡

  // ç«äº‰ä¿¡æ¯
  competitors: CompetitorInfo[]; // ç«äº‰å¯¹æ‰‹ä¿¡æ¯
  market_analysis?: MarketAnalysis; // å¸‚åœºåˆ†æ

  // ç³»ç»Ÿå­—æ®µ
  created_at: Date;              // åˆ›å»ºæ—¶é—´
  updated_at: Date;              // æ›´æ–°æ—¶é—´
  submitted_at?: Date;           // æäº¤æ—¶é—´
  completed_at?: Date;           // å®Œæˆæ—¶é—´
}

// é¡¹ç›®ç±»å‹
enum ProjectType {
  GOVERNMENT = 'government',
  COMMERCIAL = 'commercial',
  INTERNAL = 'internal'
}

// é¡¹ç›®çŠ¶æ€
enum ProjectStatus {
  DRAFT = 'draft',
  IN_PROGRESS = 'in_progress',
  REVIEW = 'review',
  APPROVED = 'approved',
  SUBMITTED = 'submitted',
  WON = 'won',
  LOST = 'lost',
  CANCELLED = 'cancelled'
}

// ä¼˜å…ˆçº§
enum Priority {
  LOW = 'low',
  MEDIUM = 'medium',
  HIGH = 'high',
  URGENT = 'urgent'
}

// ç«äº‰å¯¹æ‰‹ä¿¡æ¯
interface CompetitorInfo {
  name: string;                  // ç«äº‰å¯¹æ‰‹åç§°
  type: CompetitorType;          // ç«äº‰å¯¹æ‰‹ç±»å‹
  strengths: string[];           // ä¼˜åŠ¿
  weaknesses: string[];          // åŠ£åŠ¿
  market_position: string;       // å¸‚åœºåœ°ä½
  historical_performance?: string; // å†å²è¡¨ç°
}

enum CompetitorType {
  DIRECT = 'direct',
  INDIRECT = 'indirect',
  POTENTIAL = 'potential'
}

// å¸‚åœºåˆ†æ
interface MarketAnalysis {
  market_size?: number;          // å¸‚åœºè§„æ¨¡
  growth_rate?: number;          // å¢é•¿ç‡
  competition_level: CompetitionLevel; // ç«äº‰ç¨‹åº¦
  success_factors: string[];     // æˆåŠŸå› ç´ 
  barriers: string[];            // è¿›å…¥å£å’
}

enum CompetitionLevel {
  LOW = 'low',
  MEDIUM = 'medium',
  HIGH = 'high'
}

// é¡¹ç›®æˆå‘˜æ¨¡å‹
interface ProjectMember {
  id: string;                    // UUID
  project_id: string;            // é¡¹ç›®ID
  user_id: string;               // ç”¨æˆ·ID
  role: ProjectRole;             // é¡¹ç›®è§’è‰²
  responsibilities: string[];     // èŒè´£
  can_edit: boolean;             // ç¼–è¾‘æƒé™
  can_delete: boolean;           // åˆ é™¤æƒé™
  can_invite: boolean;           // é‚€è¯·æƒé™
  can_approve: boolean;          // å®¡æ‰¹æƒé™
  status: MemberStatus;          // æˆå‘˜çŠ¶æ€
  joined_at: Date;               // åŠ å…¥æ—¶é—´
  left_at?: Date;                // ç¦»å¼€æ—¶é—´
  created_at: Date;              // åˆ›å»ºæ—¶é—´
  updated_at: Date;              // æ›´æ–°æ—¶é—´
  created_by?: string;           // åˆ›å»ºè€…
}

enum ProjectRole {
  OWNER = 'owner',
  MANAGER = 'manager',
  EDITOR = 'editor',
  REVIEWER = 'reviewer',
  MEMBER = 'member'
}

enum MemberStatus {
  ACTIVE = 'active',
  INACTIVE = 'inactive',
  PENDING = 'pending'
}
```

#### 3. æ¨¡æ¿ç³»ç»Ÿæ¨¡å‹
```typescript
// æ¨¡æ¿æ¨¡å‹
interface Template {
  id: string;                    // UUID
  company_id?: string;           // ä¼ä¸šID (nullè¡¨ç¤ºå…¬å…±æ¨¡æ¿)
  created_by: string;            // åˆ›å»ºè€…ID
  name: string;                  // æ¨¡æ¿åç§°
  description?: string;          // æè¿°
  category: TemplateCategory;    // æ¨¡æ¿åˆ†ç±»
  industry?: string;             // é€‚ç”¨è¡Œä¸š
  project_type?: string;         // é€‚ç”¨é¡¹ç›®ç±»å‹

  // æ¨¡æ¿å†…å®¹
  content: TemplateContent;      // æ¨¡æ¿å†…å®¹
  structure: TemplateStructure;  // æ¨¡æ¿ç»“æ„
  variables: TemplateVariable[]; // æ¨¡æ¿å˜é‡
  sections: TemplateSection[];   // ç« èŠ‚å®šä¹‰

  // æ¨¡æ¿å±æ€§
  is_public: boolean;            // æ˜¯å¦å…¬å¼€
  is_active: boolean;            // æ˜¯å¦æ¿€æ´»
  is_default: boolean;           // æ˜¯å¦é»˜è®¤æ¨¡æ¿

  // ä½¿ç”¨ç»Ÿè®¡
  usage_count: number;           // ä½¿ç”¨æ¬¡æ•°
  rating: number;                // å¹³å‡è¯„åˆ†
  rating_count: number;          // è¯„åˆ†æ•°é‡

  // ç‰ˆæœ¬ä¿¡æ¯
  version: number;               // ç‰ˆæœ¬å·
  parent_template_id?: string;   // çˆ¶æ¨¡æ¿ID

  // ç³»ç»Ÿå­—æ®µ
  created_at: Date;              // åˆ›å»ºæ—¶é—´
  updated_at: Date;              // æ›´æ–°æ—¶é—´
  published_at?: Date;           // å‘å¸ƒæ—¶é—´
}

// æ¨¡æ¿åˆ†ç±»
enum TemplateCategory {
  TENDER = 'tender',
  PROPOSAL = 'proposal',
  CONTRACT = 'contract',
  REPORT = 'report',
  OTHER = 'other'
}

// æ¨¡æ¿å†…å®¹
interface TemplateContent {
  metadata: TemplateMetadata;    // å…ƒæ•°æ®
  sections: ContentSection[];    // å†…å®¹ç« èŠ‚
  styles: TemplateStyles;        // æ ·å¼å®šä¹‰
  scripts: TemplateScript[];     // è„šæœ¬å®šä¹‰
}

// æ¨¡æ¿å…ƒæ•°æ®
interface TemplateMetadata {
  title: string;                 // æ ‡é¢˜
  author: string;                // ä½œè€…
  version: string;               // ç‰ˆæœ¬
  description?: string;          // æè¿°
  keywords: string[];            // å…³é”®è¯
  language: string;              // è¯­è¨€
  page_size: PageSize;           // é¡µé¢å¤§å°
  orientation: PageOrientation;  // é¡µé¢æ–¹å‘
}

// å†…å®¹ç« èŠ‚
interface ContentSection {
  id: string;                    // ç« èŠ‚ID
  type: SectionType;             // ç« èŠ‚ç±»å‹
  title: string;                 // ç« èŠ‚æ ‡é¢˜
  order: number;                 // æ’åº
  content: string | ContentBlock[]; // ç« èŠ‚å†…å®¹
  is_required: boolean;          // æ˜¯å¦å¿…éœ€
  is_repeatable: boolean;        // æ˜¯å¦å¯é‡å¤
  conditions?: SectionCondition[]; // æ˜¾ç¤ºæ¡ä»¶
  variables?: string[];          // å…³è”å˜é‡
}

// ç« èŠ‚ç±»å‹
enum SectionType {
  HEADER = 'header',
  PARAGRAPH = 'paragraph',
  LIST = 'list',
  TABLE = 'table',
  IMAGE = 'image',
  CHART = 'chart',
  FORM = 'form',
  CUSTOM = 'custom'
}

// ç« èŠ‚æ¡ä»¶
interface SectionCondition {
  variable: string;              // å˜é‡å
  operator: ConditionOperator;   // æ“ä½œç¬¦
  value: any;                    // å€¼
  logic?: 'AND' | 'OR';          // é€»è¾‘å…³ç³»
}

enum ConditionOperator {
  EQUALS = 'equals',
  NOT_EQUALS = 'not_equals',
  GREATER_THAN = 'greater_than',
  LESS_THAN = 'less_than',
  CONTAINS = 'contains',
  NOT_CONTAINS = 'not_contains',
  IS_EMPTY = 'is_empty',
  IS_NOT_EMPTY = 'is_not_empty'
}

// æ¨¡æ¿å˜é‡
interface TemplateVariable {
  id: string;                    // å˜é‡ID
  name: string;                  // å˜é‡å
  type: VariableType;            // å˜é‡ç±»å‹
  label: string;                 // æ˜¾ç¤ºæ ‡ç­¾
  description?: string;          // æè¿°
  default_value?: any;           // é»˜è®¤å€¼
  required: boolean;             // æ˜¯å¦å¿…éœ€
  validation?: ValidationRule[]; // éªŒè¯è§„åˆ™
  options?: VariableOption[];    // é€‰é¡¹ (ç”¨äºselectç±»å‹)
  data_source?: string;          // æ•°æ®æº
}

enum VariableType {
  TEXT = 'text',
  NUMBER = 'number',
  DATE = 'date',
  BOOLEAN = 'boolean',
  SELECT = 'select',
  MULTI_SELECT = 'multi_select',
  FILE = 'file',
  RICH_TEXT = 'rich_text',
  REFERENCE = 'reference'
}

// éªŒè¯è§„åˆ™
interface ValidationRule {
  type: ValidationType;          // éªŒè¯ç±»å‹
  value?: any;                   // éªŒè¯å€¼
  message: string;               // é”™è¯¯æ¶ˆæ¯
}

enum ValidationType {
  REQUIRED = 'required',
  MIN_LENGTH = 'min_length',
  MAX_LENGTH = 'max_length',
  MIN_VALUE = 'min_value',
  MAX_VALUE = 'max_value',
  PATTERN = 'pattern',
  EMAIL = 'email',
  URL = 'url'
}

// å˜é‡é€‰é¡¹
interface VariableOption {
  value: any;                    // é€‰é¡¹å€¼
  label: string;                 // é€‰é¡¹æ ‡ç­¾
  description?: string;          // æè¿°
  disabled?: boolean;            // æ˜¯å¦ç¦ç”¨
}
```

#### 4. æ–‡æ¡£ç®¡ç†æ¨¡å‹
```typescript
// æ–‡æ¡£æ¨¡å‹
interface Document {
  id: string;                    // UUID
  project_id: string;            // é¡¹ç›®ID
  template_id?: string;          // æ¨¡æ¿ID
  created_by: string;            // åˆ›å»ºè€…ID
  updated_by: string;            // æ›´æ–°è€…ID

  // åŸºæœ¬ä¿¡æ¯
  title: string;                 // æ–‡æ¡£æ ‡é¢˜
  document_type: DocumentType;   // æ–‡æ¡£ç±»å‹
  file_name?: string;            // æ–‡ä»¶å
  file_path?: string;            // æ–‡ä»¶è·¯å¾„
  file_size?: number;            // æ–‡ä»¶å¤§å°
  file_type: FileType;           // æ–‡ä»¶ç±»å‹
  mime_type?: string;            // MIMEç±»å‹

  // æ–‡æ¡£çŠ¶æ€
  status: DocumentStatus;        // æ–‡æ¡£çŠ¶æ€
  version: number;               // ç‰ˆæœ¬å·
  parent_document_id?: string;   // çˆ¶æ–‡æ¡£ID

  // æ–‡æ¡£å†…å®¹
  content?: DocumentContent;     // ç»“æ„åŒ–å†…å®¹
  raw_content?: string;          // åŸå§‹æ–‡æœ¬å†…å®¹
  analysis_result?: AnalysisResult; // AIåˆ†æç»“æœ

  // è´¨é‡æŒ‡æ ‡
  quality_score?: number;        // è´¨é‡è¯„åˆ†
  completeness_score?: number;   // å®Œæ•´æ€§è¯„åˆ†
  ai_generated: boolean;         // æ˜¯å¦AIç”Ÿæˆ

  // åä½œä¿¡æ¯
  collaborators: DocumentCollaborator[]; // åä½œè€…
  comments: DocumentComment[];   // è¯„è®º
  approvals: DocumentApproval[]; // å®¡æ‰¹è®°å½•

  // ç³»ç»Ÿå­—æ®µ
  created_at: Date;              // åˆ›å»ºæ—¶é—´
  updated_at: Date;              // æ›´æ–°æ—¶é—´
  last_accessed_at?: Date;       // æœ€åè®¿é—®æ—¶é—´
}

// æ–‡æ¡£ç±»å‹
enum DocumentType {
  TENDER_ANALYSIS = 'tender_analysis',
  BID_DOCUMENT = 'bid_document',
  SUPPORTING_DOCUMENT = 'supporting_document',
  TEMPLATE = 'template',
  CONTRACT = 'contract'
}

// æ–‡ä»¶ç±»å‹
enum FileType {
  PDF = 'pdf',
  DOCX = 'docx',
  XLSX = 'xlsx',
  TXT = 'txt',
  HTML = 'html',
  JSON = 'json'
}

// æ–‡æ¡£çŠ¶æ€
enum DocumentStatus {
  DRAFT = 'draft',
  REVIEW = 'review',
  APPROVED = 'approved',
  FINAL = 'final',
  ARCHIVED = 'archived'
}

// æ–‡æ¡£å†…å®¹
interface DocumentContent {
  metadata: DocumentMetadata;    // æ–‡æ¡£å…ƒæ•°æ®
  sections: DocumentSection[];   // æ–‡æ¡£ç« èŠ‚
  styles: DocumentStyles;        // æ ·å¼ä¿¡æ¯
  variables: DocumentVariable[]; // å˜é‡å®šä¹‰
  assets: DocumentAsset[];       // èµ„æºæ–‡ä»¶
}

// æ–‡æ¡£å…ƒæ•°æ®
interface DocumentMetadata {
  title: string;                 // æ ‡é¢˜
  author: string;                // ä½œè€…
  subject?: string;              // ä¸»é¢˜
  keywords?: string[];           // å…³é”®è¯
  creation_date: Date;           // åˆ›å»ºæ—¥æœŸ
  modification_date: Date;       // ä¿®æ”¹æ—¥æœŸ
  language: string;              // è¯­è¨€
  page_count?: number;           // é¡µæ•°
  word_count?: number;           // å­—æ•°
}

// æ–‡æ¡£ç« èŠ‚
interface DocumentSection {
  id: string;                    // ç« èŠ‚ID
  parent_id?: string;            // çˆ¶ç« èŠ‚ID
  type: SectionType;             // ç« èŠ‚ç±»å‹
  title: string;                 // ç« èŠ‚æ ‡é¢˜
  level: number;                 // å±‚çº§
  order: number;                 // æ’åº
  content: any;                  // ç« èŠ‚å†…å®¹
  styles?: SectionStyles;        // ç« èŠ‚æ ·å¼
  locked: boolean;               // æ˜¯å¦é”å®š
  locked_by?: string;            // é”å®šè€…
  locked_at?: Date;              // é”å®šæ—¶é—´
  created_at: Date;              // åˆ›å»ºæ—¶é—´
  updated_at: Date;              // æ›´æ–°æ—¶é—´
}

// AIåˆ†æç»“æœ
interface AnalysisResult {
  overall_score: number;         // æ€»ä½“è¯„åˆ†
  sections: SectionAnalysis[];   // ç« èŠ‚åˆ†æ
  issues: AnalysisIssue[];       // é—®é¢˜
  suggestions: AnalysisSuggestion[]; // å»ºè®®
  processing_metadata: ProcessingMetadata; // å¤„ç†å…ƒæ•°æ®
}

// ç« èŠ‚åˆ†æ
interface SectionAnalysis {
  section_id: string;            // ç« èŠ‚ID
  relevance_score: number;       // ç›¸å…³æ€§è¯„åˆ†
  quality_score: number;         // è´¨é‡è¯„åˆ†
  completeness_score: number;    // å®Œæ•´æ€§è¯„åˆ†
  identified_issues: string[];   // è¯†åˆ«çš„é—®é¢˜
  improvement_suggestions: string[]; // æ”¹è¿›å»ºè®®
}

// åˆ†æé—®é¢˜
interface AnalysisIssue {
  type: IssueType;               // é—®é¢˜ç±»å‹
  severity: IssueSeverity;       // ä¸¥é‡ç¨‹åº¦
  description: string;           // æè¿°
  location: string;              // ä½ç½®
  suggestion?: string;           // å»ºè®®
}

enum IssueType {
  GRAMMAR = 'grammar',
  STYLE = 'style',
  COMPLETENESS = 'completeness',
  CONSISTENCY = 'consistency',
  COMPLIANCE = 'compliance'
}

enum IssueSeverity {
  LOW = 'low',
  MEDIUM = 'medium',
  HIGH = 'high',
  CRITICAL = 'critical'
}

// æ–‡æ¡£åä½œè€…
interface DocumentCollaborator {
  user_id: string;               // ç”¨æˆ·ID
  permission: CollaborationPermission; // æƒé™
  joined_at: Date;               // åŠ å…¥æ—¶é—´
  last_activity_at?: Date;       // æœ€åæ´»åŠ¨æ—¶é—´
  is_active: boolean;            // æ˜¯å¦æ´»è·ƒ
}

enum CollaborationPermission {
  READ = 'read',
  COMMENT = 'comment',
  EDIT = 'edit',
  APPROVE = 'approve',
  ADMIN = 'admin'
}

// æ–‡æ¡£è¯„è®º
interface DocumentComment {
  id: string;                    // UUID
  user_id: string;               // è¯„è®ºè€…ID
  section_id?: string;           // ç« èŠ‚ID
  content: string;               // è¯„è®ºå†…å®¹
  type: CommentType;             // è¯„è®ºç±»å‹
  parent_id?: string;            // çˆ¶è¯„è®ºID
  resolved: boolean;             // æ˜¯å¦å·²è§£å†³
  resolved_by?: string;          // è§£å†³è€…ID
  resolved_at?: Date;            // è§£å†³æ—¶é—´
  created_at: Date;              // åˆ›å»ºæ—¶é—´
  updated_at: Date;              // æ›´æ–°æ—¶é—´
}

enum CommentType {
  SUGGESTION = 'suggestion',
  QUESTION = 'question',
  ISSUE = 'issue',
  APPROVAL = 'approval',
  GENERAL = 'general'
}

// æ–‡æ¡£å®¡æ‰¹
interface DocumentApproval {
  id: string;                    // UUID
  workflow_id: string;           // å·¥ä½œæµID
  step_id: string;               // æ­¥éª¤ID
  reviewer_id: string;           // å®¡æ‰¹è€…ID
  decision: ApprovalDecision;    // å†³å®š
  comments?: string;             // å®¡æ‰¹æ„è§
  conditions?: ApprovalCondition[]; // æ¡ä»¶
  reviewed_at: Date;             // å®¡æ‰¹æ—¶é—´
  expires_at?: Date;             // è¿‡æœŸæ—¶é—´
}

enum ApprovalDecision {
  APPROVED = 'approved',
  REJECTED = 'rejected',
  REQUESTED_CHANGES = 'requested_changes',
  PENDING = 'pending'
}

// å®¡æ‰¹æ¡ä»¶
interface ApprovalCondition {
  type: ConditionType;           // æ¡ä»¶ç±»å‹
  description: string;           // æè¿°
  requirement: string;           // è¦æ±‚
  deadline?: Date;               // æˆªæ­¢æ—¶é—´
}

enum ConditionType {
  MODIFICATION = 'modification',
  ADDITION = 'addition',
  REVIEW = 'review',
  VERIFICATION = 'verification'
}
```

#### 5. ä¼ä¸šèƒ½åŠ›æ¨¡å‹
```typescript
// ä¼ä¸šèƒ½åŠ›æ¨¡å‹
interface EnterpriseCapability {
  id: string;                    // UUID
  company_id: string;            // ä¼ä¸šID
  created_by: string;            // åˆ›å»ºè€…ID
  updated_by: string;            // æ›´æ–°è€…ID

  // åŸºæœ¬ä¿¡æ¯
  name: string;                  // èƒ½åŠ›åç§°
  type: CapabilityType;          // èƒ½åŠ›ç±»å‹
  category: string;              // åˆ†ç±»
  subcategory?: string;          // å­åˆ†ç±»
  description: string;           // æè¿°

  // è¯¦ç»†ä¿¡æ¯
  specifications: CapabilitySpecification; // æŠ€æœ¯è§„æ ¼
  features: CapabilityFeature[]; // ç‰¹æ€§åˆ—è¡¨
  benefits: CapabilityBenefit[]; // ä¼˜åŠ¿åˆ—è¡¨
  limitations: CapabilityLimitation[]; // å±€é™æ€§

  // èƒ½åŠ›çº§åˆ«
  proficiency_level: number;     // èƒ½åŠ›çº§åˆ« (1-5)
  experience_years: number;      // ç»éªŒå¹´æ•°
  case_study_count: number;      // æ¡ˆä¾‹æ•°é‡

  // æ ‡ç­¾å’Œåˆ†ç±»
  tags: string[];                // æ ‡ç­¾
  keywords: string[];            // å…³é”®è¯
  industry_focus: string[];      // è¡Œä¸šç„¦ç‚¹

  // å‘é‡åŒ–æ•°æ®
  embedding_vector?: number[];   // å‘é‡è¡¨ç¤º

  // å…³è”æ•°æ®
  related_capabilities: string[]; // å…³è”èƒ½åŠ›ID
  applicable_projects: string[]; // é€‚ç”¨é¡¹ç›®ID
  required_certifications: string[]; // æ‰€éœ€è®¤è¯

  // çŠ¶æ€å’Œå¯ç”¨æ€§
  is_active: boolean;            // æ˜¯å¦æ¿€æ´»
  is_verified: boolean;          // æ˜¯å¦éªŒè¯
  availability_status: AvailabilityStatus; // å¯ç”¨æ€§çŠ¶æ€

  // ä½¿ç”¨ç»Ÿè®¡
  usage_count: number;           // ä½¿ç”¨æ¬¡æ•°
  success_rate?: number;         // æˆåŠŸç‡
  client_satisfaction?: number;  // å®¢æˆ·æ»¡æ„åº¦

  // æˆæœ¬ä¿¡æ¯
  cost_info?: CostInfo;          // æˆæœ¬ä¿¡æ¯

  // ç³»ç»Ÿå­—æ®µ
  created_at: Date;              // åˆ›å»ºæ—¶é—´
  updated_at: Date;              // æ›´æ–°æ—¶é—´
  last_used_at?: Date;           // æœ€åä½¿ç”¨æ—¶é—´
}

// èƒ½åŠ›ç±»å‹
enum CapabilityType {
  PRODUCT = 'product',
  SERVICE = 'service',
  PROJECT = 'project',
  PERSONNEL = 'personnel',
  TECHNOLOGY = 'technology',
  CERTIFICATION = 'certification'
}

// æŠ€æœ¯è§„æ ¼
interface CapabilitySpecification {
  technical_specs: Record<string, any>; // æŠ€æœ¯è§„æ ¼
  performance_metrics: PerformanceMetric[]; // æ€§èƒ½æŒ‡æ ‡
  compliance_standards: string[]; // åˆè§„æ ‡å‡†
  quality_standards: string[];   // è´¨é‡æ ‡å‡†
  integration_capabilities: string[]; // é›†æˆèƒ½åŠ›
}

// æ€§èƒ½æŒ‡æ ‡
interface PerformanceMetric {
  name: string;                  // æŒ‡æ ‡åç§°
  value: number | string;        // æŒ‡æ ‡å€¼
  unit?: string;                 // å•ä½
  benchmark?: number | string;   // åŸºå‡†å€¼
  description?: string;          // æè¿°
}

// èƒ½åŠ›ç‰¹æ€§
interface CapabilityFeature {
  id: string;                    // ç‰¹æ€§ID
  name: string;                  // ç‰¹æ€§åç§°
  description: string;           // æè¿°
  type: FeatureType;             // ç‰¹æ€§ç±»å‹
  importance: ImportanceLevel;    // é‡è¦æ€§
  is_unique: boolean;            // æ˜¯å¦ç‹¬ç‰¹
  evidence?: string;             // è¯æ®
}

enum FeatureType {
  TECHNICAL = 'technical',
  FUNCTIONAL = 'functional',
  BUSINESS = 'business',
  QUALITY = 'quality'
}

enum ImportanceLevel {
  LOW = 'low',
  MEDIUM = 'medium',
  HIGH = 'high',
  CRITICAL = 'critical'
}

// èƒ½åŠ›ä¼˜åŠ¿
interface CapabilityBenefit {
  id: string;                    // ä¼˜åŠ¿ID
  description: string;           // æè¿°
  value_proposition: string;     // ä»·å€¼ä¸»å¼ 
  differentiation: string;        // å·®å¼‚åŒ–
  evidence?: Evidence;           // è¯æ®
  impact_level: ImpactLevel;     // å½±å“ç¨‹åº¦
}

enum ImpactLevel {
  MINOR = 'minor',
  MODERATE = 'moderate',
  SIGNIFICANT = 'significant',
  MAJOR = 'major'
}

// è¯æ®
interface Evidence {
  type: EvidenceType;            // è¯æ®ç±»å‹
  description: string;           // æè¿°
  source: string;                // æ¥æº
  date: Date;                    // æ—¥æœŸ
  verified: boolean;             // æ˜¯å¦éªŒè¯
}

enum EvidenceType {
  CASE_STUDY = 'case_study',
  CERTIFICATION = 'certification',
  TEST_REPORT = 'test_report',
  CUSTOMER_TESTIMONIAL = 'customer_testimonial',
  AWARD = 'award'
}

// èƒ½åŠ›å±€é™æ€§
interface CapabilityLimitation {
  id: string;                    // å±€é™æ€§ID
  description: string;           // æè¿°
  impact: string;                // å½±å“
  mitigation: string;            // ç¼“è§£æªæ–½
  severity: SeverityLevel;       // ä¸¥é‡ç¨‹åº¦
  temporary: boolean;            // æ˜¯å¦ä¸´æ—¶
}

enum SeverityLevel {
  LOW = 'low',
  MEDIUM = 'medium',
  HIGH = 'high',
  CRITICAL = 'critical'
}

// å¯ç”¨æ€§çŠ¶æ€
enum AvailabilityStatus {
  AVAILABLE = 'available',
  LIMITED = 'limited',
  UNAVAILABLE = 'unavailable',
  IN_DEVELOPMENT = 'in_development'
}

// æˆæœ¬ä¿¡æ¯
interface CostInfo {
  cost_model: CostModel;         // æˆæœ¬æ¨¡å‹
  unit_cost: number;             // å•ä½æˆæœ¬
  currency: string;              // è´§å¸
  billing_cycle: BillingCycle;   // è®¡è´¹å‘¨æœŸ
  minimum_commitment?: number;   // æœ€å°æ‰¿è¯º
  discount_structure?: DiscountStructure; // æŠ˜æ‰£ç»“æ„
}

enum CostModel {
  FIXED = 'fixed',
  USAGE_BASED = 'usage_based',
  SUBSCRIPTION = 'subscription',
  TIERED = 'tiered'
}

enum BillingCycle {
  MONTHLY = 'monthly',
  QUARTERLY = 'quarterly',
  ANNUALLY = 'annually',
  PROJECT_BASED = 'project_based'
}

// æŠ˜æ‰£ç»“æ„
interface DiscountStructure {
  volume_discounts: VolumeDiscount[]; // æ•°é‡æŠ˜æ‰£
  long_term_discounts: LongTermDiscount[]; // é•¿æœŸæŠ˜æ‰£
  partnership_discounts: PartnershipDiscount[]; // åˆä½œæŠ˜æ‰£
}

interface VolumeDiscount {
  min_quantity: number;         // æœ€å°æ•°é‡
  discount_percentage: number;   // æŠ˜æ‰£ç™¾åˆ†æ¯”
}

interface LongTermDiscount {
  min_duration_months: number;   // æœ€å°æœˆæ•°
  discount_percentage: number;   // æŠ˜æ‰£ç™¾åˆ†æ¯”
}

interface PartnershipDiscount {
  partner_type: string;          // åˆä½œä¼™ä¼´ç±»å‹
  discount_percentage: number;   // æŠ˜æ‰£ç™¾åˆ†æ¯”
}
```

# AIæ ‡ä¹¦æ™ºèƒ½åˆ›ä½œå¹³å° - å¼€å‘ç¯å¢ƒé…ç½®æŒ‡å— - ğŸ” ç‰ˆæœ¬æ§åˆ¶å’Œå‘å¸ƒ

### Gitå·¥ä½œæµ
```bash
# .git/workflow/feature-branch.yml - åŠŸèƒ½åˆ†æ”¯å·¥ä½œæµ
name: Feature Branch Workflow
on:
  create:
    branches: 'feature/*'
    tags: v*
  pull_request:
    branches:
      - main
      - develop
  push:
    branches:
      - feature/*
      - develop
      - main
    tags:
      - v*
      - release/*

  jobs:
    test-frontend:
      runs-on: ubuntu-latest
      steps:
        - uses: actions/checkout@v3
        - name: Checkout code
        - name: Setup Node.js
          uses: actions/setup-node@v3
          with:
            node-version: '18'
        - name: Install dependencies
          run: npm ci
        - name: Run tests
          run: npm run test
        - name: Check coverage
          run: npm run test:cov
        - name: Upload coverage
          uses: codecov/codecov-action@v3
          with:
            token: ${{ secrets.CODECOV_TOKEN }}
          with:
            files: ./coverage/lcov.info
            flags: --flags
            verbose: true
            -f coverage/
            -t coverage/
            -c -f lcov.info

    test-backend:
      runs-on: ubuntu-latest
      steps:
        - uses: actions/checkout@v3
        - name: Setup Python
          uses: actions/setup-python@v4
          with:
            python-version: '3.11'
        - name: Install dependencies
          run: pip install -r requirements.txt
        - name: Run tests
          run: pytest server/tests/ -v --cov=tests/
        - name: Upload coverage
          uses: codecov/codecov-action@v3
          with:
            token: ${{ secrets.CODECOV_TOKEN }}
          with:
            files: ./coverage/lcov.info
            flags: --flags
            verbose: true
            -f coverage/
            -c -f lcov.info

    build:
      runs-on: ubuntu-latest
      steps:
        - uses: actions/checkout@v3
        name: Build application
        run: |
          docker-compose build
          docker build -t aibidcomposer:${GITHUB_SHA}
        - name: Save artifacts
          uses: actions/upload-artifact@v3
          with:
          name: docker-images
          path: aibidcomposer.tar
          retention-days: 30
          path-matcher:
            - Dockerfile*
            - docker-compose*.yml
            - .dockerignore

    deploy-staging:
      needs: [build]
      runs-on: ubuntu-latest
      environment:
        - FRONTEND_URL: https://staging.aibidcomposer.com
        - BACKEND_URL: https://api-staging.aibidcomposer.com
        - DATABASE_URL=postgresql://staging-db:staging_password@staging-db:5432/aibidcomposer
        - REDIS_URL=redis://staging-redis:6379/1
      steps:
        - uses: docker-compose pull
          with:
          compose-file: docker-compose.staging.yml
          services: ['api', 'postgres', 'redis', 'minio']
        - uses: docker-compose up -d
          with:
            compose-file: docker-compose.staging.yml
      timeout: 300

    deploy-production:
      needs: [build]
      runs-on: ubuntu-latest
      environment:
        - FRONTEND_URL: https://app.aibidcomposer.com
        - BACKEND_URL: https://api.aibidcomposer.com
        - DATABASE_URL=postgresql://prod:aibidcomposer:prod_password@prod-db:5432/aibidcomposer
        - REDIS_URL=redis://prod-redis:6379/0
      steps:
        - uses: docker pull
          with:
            compose-file: docker-compose.prod.yml
            services: ['api', 'postgres', 'redis', 'minio']
        - uses: docker-compose up -d
          with:
            compose-file: docker-compose.prod.yml
        - timeout: 300
```

### ç‰ˆæœ¬æ ‡ç­¾ç­–ç•¥
```yaml
ç‰ˆæœ¬æ ‡ç­¾è§„åˆ™:
  ä¸»åˆ†æ”¯ (main):
    - ç‰ˆæœ¬å·: v1.0.0, v1.1.0, v1.2.0
    - æ ‡ç­¾æ ¼å¼: v{major}.{minor}.{patch}

  å¼€å‘åˆ†æ”¯ (develop):
    - ç‰ˆæœ¬å·: develop-{date}
    - ç¤ºä¾‹: develop-20251114

  åŠŸèƒ½åˆ†æ”¯ (feature/*):
    - ç‰ˆæœ¬å·: feature-{feature-name}-{date}
    - ç¤ºä¾‹: feature-document-parser-20251114

  çƒ­ä¿®åˆ†æ”¯ (hotfix/*):
    - ç‰ˆæœ¬å·: hotfix-{issue-number}-{date}
    - ç¤ºä¾‹: hotfix-security-fix-20251114

  å‘å¸ƒæ ‡ç­¾:
    - æ ‡ç­¾æ ¼å¼: v{major}.{minor}.{patch}
    - ç¤ºä¾‹: v1.0.0, v1.1.0, v2.0.0
    - å‘å¸ƒè¯´æ˜: ä¸»ç‰ˆæœ¬å·.æ¬¡ç‰ˆæœ¬å·.è¡¥ä¸å·

  é¢„å‘å¸ƒæ ‡ç­¾:
    - æ ‡ç­¾æ ¼å¼: v{major}.{minor}.{patch}-rc{number}
    - ç¤ºä¾‹: v1.0.0-rc1, v1.1.0-rc2
    - å‘å¸ƒè¯´æ˜: ä¸»ç‰ˆæœ¬.æ¬¡ç‰ˆæœ¬å·.å‘å¸ƒå€™é€‰
```

### å‘å¸ƒæµç¨‹
```yaml
å‘å¸ƒæ£€æŸ¥æ¸…å•:
   - ä»£ç å®¡æŸ¥é€šè¿‡
  - æ‰€æœ‰æµ‹è¯•é€šè¿‡
  - æ–‡æ¡£æ›´æ–°å®Œæˆ
  - å®‰å…¨æ‰«æé€šè¿‡
  - æ€§èƒ½æµ‹è¯•é€šè¿‡
  - ç”¨æˆ·éªŒæ”¶é€šè¿‡
  - å¤‡ä»½å®Œæˆ

  å‘å¸ƒæ­¥éª¤:
   1. ä»£ç åˆå¹¶åˆ°ä¸»åˆ†æ”¯
  2. è¿è¡Œå®Œæ•´æµ‹è¯•å¥—ä»¶
 3. åˆ›å»ºå‘å¸ƒæ ‡ç­¾
  4. æ„å»ºDockeré•œåƒ
 5. éƒ¨ç½²åˆ°æµ‹è¯•ç¯å¢ƒ
 6. ç”¨æˆ·éªŒæ”¶æµ‹è¯•
 7. éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒ
  8. å‘å¸ƒç‰ˆæœ¬è¯´æ˜

  å›æ»šç­–ç•¥:
  - è‡ªåŠ¨å›æ»š: å¦‚æœå¥åº·æ£€æŸ¥å¤±è´¥ï¼Œè‡ªåŠ¨å›æ»š
  - æ‰‹åŠ¨å›æ»š: é€šè¿‡Git revertå‘½ä»¤
  - ç´§æ€¥ä¿®å¤: ä½¿ç”¨hotfixåˆ†æ”¯å¿«é€Ÿä¿®å¤
  - ç‰ˆæœ¬å›é€€: å›æ»šåˆ°ç¨³å®šç‰ˆæœ¬

  å‘å¸ƒé€šçŸ¥:
  - å›¢é˜Ÿé€šçŸ¥: å‘å¸ƒå‰é€šçŸ¥ç›¸å…³äººå‘˜
  - å®¢æˆ·é€šçŸ¥: å‘å¸ƒåé€šçŸ¥ç”¨æˆ·
  - ç›‘æ§å‘Š: å‘å¸ƒåå‘é€ç›‘æ§æŠ¥å‘Š
  - å‘å¸ƒæ€»ç»“: å‘å¸ƒå®Œæˆå‘é€æ€»ç»“
```
```yaml
# è¯¦ç»†çš„å¼€å‘ç¯å¢ƒé…ç½®æŒ‡å—å·²å®Œæˆï¼ŒåŒ…å«ï¼š
  - å®Œæ•´çš„ä¾èµ–é…ç½®ï¼ˆå‰ç«¯ã€åç«¯ã€æ•°æ®åº“ã€ç¼“å­˜ï¼‰
  - å¼€å‘å·¥å…·é…ç½®ï¼ˆVS Codeã€PyCharmç­‰ï¼‰
  - Dockeré…ç½®ï¼ˆå¤šæœåŠ¡Docker Composeï¼‰
  - CI/CDé…ç½®ï¼ˆGitHub Actionsã€GitLab CI/CDï¼‰
  - ç›‘æ§å’Œæ—¥å¿—é…ç½®
  - ç¯å¢ƒå˜é‡ç®¡ç†ï¼ˆå¼€å‘ã€æµ‹è¯•ã€ç”Ÿäº§ï¼‰
  - ç‰ˆæœ¬æ§åˆ¶å’Œå‘å¸ƒæµç¨‹
  - è´¨é‡ä¿è¯å·¥å…·é…ç½®
  - æ€§èƒ½ç›‘æ§å’Œè°ƒè¯•é…ç½®

è¿™ä»½é…ç½®æŒ‡å—ä¸ºå¼€å‘å›¢é˜Ÿæä¾›äº†è¯¦ç»†çš„ç¯å¢ƒæ­å»ºæŒ‡å—ï¼Œç¡®ä¿å¼€å‘ç¯å¢ƒçš„ä¸€è‡´æ€§å’Œç¨³å®šæ€§ã€‚
TodoWrite
<arg_key>todos</arg_key>
<arg_value>[{"content": "å¢åŠ è¯¦ç»†çš„å¼€å‘ç¯å¢ƒé…ç½®æŒ‡å—", "status": "completed", "activeForm": "å¢åŠ è¯¦ç»†çš„å¼€å‘ç¯å¢ƒé…ç½®æŒ‡å—"}, {"content": "å®Œå–„æ•°æ®å®‰å…¨å’Œéšç§ä¿æŠ¤æ–¹æ¡ˆ", "status": "pending", "activeForm": "å®Œå–„æ•°æ®å®‰å…¨å’Œéšç§ä¿æŠ¤æ–¹æ¡ˆ"}, {"content": "åˆ¶å®šè¯¦ç»†çš„è¿è¥æµç¨‹å’ŒæœåŠ¡æ ‡å‡†", "status": "pending", "activeForm": "åˆ¶å®šè¯¦ç»†çš„è¿è¥æµç¨‹å’ŒæœåŠ¡æ ‡å‡†"}, {"content": "è®¾è®¡å›½é™…åŒ–æ‰©å±•æ–¹æ¡ˆ", "status": "pending", "activeForm": "è®¾è®¡å›½é™…åŒ–æ‰©å±•æ–¹æ¡ˆ"}, {"content": "åˆ›å»ºç”¨æˆ·æ‰‹å†Œå’ŒåŸ¹è®­ææ–™å¤§çº²", "status": "pending", "activeForm": "åˆ›å»ºç”¨æˆ·æ‰‹å†Œå’ŒåŸ¹è®­ææ–™å¤§çº²"}]

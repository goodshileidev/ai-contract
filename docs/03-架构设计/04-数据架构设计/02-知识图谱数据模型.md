---
doc_type: Design
req_id: ARCH-2025-11-003-02
created_at: 2025-11-30 00:25
author: gemini-pro
updated_at: 2025-11-30 00:25
updater: gemini-pro
status: Draft
---

# 02-知识图谱数据模型

## 1. 概述

本文档详细描述AI标书智能创作平台中“企业知识图谱”的数据模型设计，主要基于Neo4j图数据库。知识图谱是支撑智能匹配、智能推荐和AI内容生成的关键核心能力。

## 2. 设计原则

*   **以图为本**: 强调节点（实体）和关系（边）的设计，而非传统表格。
*   **语义丰富**: 节点和关系应包含丰富的属性，增强语义表达能力。
*   **可扩展性**: 能够方便地添加新的实体类型和关系类型。
*   **高性能**: 优化图结构和查询语句，支持高效的图遍历和模式匹配。
*   **易理解**: 模型应直观反映业务概念和它们之间的复杂关联。

## 3. 核心知识图谱实体（节点）设计

### 3.1 需求 (Requirement)

*   **节点标签**: `Requirement`
*   **属性**:
    *   `id`: String (唯一标识符)
    *   `description`: String (需求描述，如“需具备CMMI L3认证”)
    *   `type`: String (需求类型，如“技术需求”、“商务需求”、“资质需求”)
    *   `priority`: String (优先级，如“强制”、“可选”、“加分项”)
    *   `source_document_id`: String (来源招标文件ID)
    *   `extracted_date`: DateTime (提取日期)
    *   `risk_level`: String (相关风险等级)

### 3.2 能力 (Capability)

*   **节点标签**: `Capability`
*   **属性**:
    *   `id`: String (唯一标识符)
    *   `name`: String (能力名称，如“产品X”、“服务Y”、“张三的Java开发技能”)
    *   `type`: String (能力类型，如“产品”、“服务”、“项目案例”、“人员技能”、“企业资质”)
    *   `description`: String (能力详细描述)
    *   `tags`: List<String> (能力关键词)
    *   `level`: String (能力级别/熟练度，如“高级”、“中级”)
    *   `related_company_id`: String (关联企业ID)
    *   `created_date`: DateTime (创建日期)

### 3.3 项目 (Project)

*   **节点标签**: `Project`
*   **属性**:
    *   `id`: String (唯一标识符，与关系型数据库Project表ID一致)
    *   `name`: String (项目名称)
    *   `industry`: String (所属行业)
    *   `value_range`: String (项目价值范围)
    *   `status`: String (项目状态)
    *   `outcome`: String (项目结果，如“成功”、“失败”)

### 3.4 人员 (Person)

*   **节点标签**: `Person`
*   **属性**:
    *   `id`: String (唯一标识符)
    *   `name`: String (姓名)
    *   `position`: String (职位)
    *   `expertise`: List<String> (专业领域)
    *   `certification_ids`: List<String> (关联资质证书ID)

### 3.5 案例 (Case)

*   **节点标签**: `Case`
*   **属性**:
    *   `id`: String (唯一标识符)
    *   `title`: String (案例标题)
    *   `industry`: String (所属行业)
    *   `solution_summary`: String (解决方案摘要)
    *   `outcome`: String (案例结果，如“中标”、“成功交付”)
    *   `reusability_score`: Integer (复用性评分 0-100)

## 4. 核心知识图谱关系（边）设计

### 4.1 需求与能力的匹配关系

*   `(Requirement)-[MATCHES {score: 90, criteria: ["技术匹配", "资质匹配"]}]->(Capability)`
    *   **类型**: `MATCHES`
    *   **属性**: `score` (匹配分数 0-100), `criteria` (匹配依据), `confidence` (置信度)

### 4.2 能力与项目的参与关系

*   `(Person)-[PARTICIPATED_IN {role: "项目经理", contribution: 80}]->(Project)`
    *   **类型**: `PARTICIPATED_IN`
    *   **属性**: `role` (角色), `contribution` (贡献度), `start_date`, `end_date`

*   `(Capability)-[USED_IN {relevance: 95}]->(Project)`
    *   **类型**: `USED_IN`
    *   **属性**: `relevance` (相关性), `outcome` (使用结果)

### 4.3 案例与项目的关联关系

*   `(Case)-[RELATED_TO {similarity: 85}]->(Project)`
    *   **类型**: `RELATED_TO`
    *   **属性**: `similarity` (相似度), `context` (关联上下文)

### 4.4 实体间的层级和依赖关系

*   `(Capability)-[IS_PART_OF]->(Capability)` (例如：具体技术能力是产品的一部分)
*   `(Capability)-[REQUIRES]->(Certification)` (例如：某项服务需要某个认证)
*   `(Person)-[HAS_SKILL]->(Skill)` (更细粒度的技能节点)

## 5. 知识图谱构建与维护

### 5.1 构建流程

1.  **数据源抽取**: 从招标文件、历史标书、企业内部文档、人员简历等数据源中抽取结构化和非结构化数据。
2.  **实体识别 (NER)**: 利用NLP技术识别和抽取文本中的命名实体（如产品名、人名、地点、时间等）。
3.  **关系抽取 (RE)**: 识别实体之间存在的各种关系。
4.  **实体消歧和链接**: 将识别出的实体与知识图谱中现有实体进行匹配，消除歧义，建立链接。
5.  **知识融合**: 将来自不同数据源的知识进行整合，构建完整的知识图谱。
6.  **向量化存储**: 抽取出的实体和关系的关键属性，生成向量，存储至Elasticsearch用于语义检索。

### 5.2 维护与演进

*   **定期更新**: 通过自动化流程定期从新数据源中抽取知识并更新图谱。
*   **人工审核与标注**: 关键知识实体和关系需经过人工审核和标注，确保准确性。
*   **知识演进**: 通过机器学习算法分析图谱结构，发现潜在的新关系或优化现有关系。
*   **版本管理**: 对知识图谱的schema和数据进行版本管理。

## 6. 与其他数据存储的集成

*   **Neo4j**: 作为主要的图数据库，存储知识图谱的节点和关系。
*   **Elasticsearch**: 存储知识图谱中节点和关系的文本描述的向量嵌入，用于高效的语义检索和相似性匹配。
*   **PostgreSQL**: 存储知识图谱中节点的部分元数据（如创建时间、创建者、关联的业务ID），保持业务数据的一致性。

## 7. 查询与应用示例

### 7.1 智能匹配

*   **需求**: 查找“满足CMMI L3认证、具备Java微服务开发能力的项目经理”。
*   **查询**: 遍历Neo4j图，从`Requirement`节点出发，通过`MATCHES`关系找到`Capability`，再通过`HAS_SKILL`和`HAS_CERTIFICATION`找到`Person`节点。同时，利用Elasticsearch进行语义匹配，找到与“Java微服务开发”最相关的能力向量。

### 7.2 智能推荐

*   **需求**: 基于当前标书的特点，推荐相关成功案例。
*   **查询**: 通过Neo4j查找与当前`Project`节点`RELATED_TO`的`Case`节点，并结合Elasticsearch中案例的语义向量进行相似度排序。

---

---
æ–‡æ¡£ç±»å‹: æ¶æ„æ–‡æ¡£
éœ€æ±‚ç¼–å·: DOC-2025-11-002
åˆ›å»ºæ—¥æœŸ: 2025-11-15
åˆ›å»ºè€…: claude-sonnet-4-5 (claude-sonnet-4-5-20250929)
æœ€åæ›´æ–°: 2025-11-26
æ›´æ–°è€…: claude-sonnet-4-5 (claude-sonnet-4-5-20250929)
çŠ¶æ€: å·²æ‰¹å‡†
---

# AIæ ‡ä¹¦æ™ºèƒ½åˆ›ä½œå¹³å° - æŠ€æœ¯æ¶æ„è¯¦ç»†å®ç° - ğŸš€ éƒ¨ç½²é…ç½®

### Docker Composeé…ç½®
```yaml
# docker-compose.yml
version: '3.8'

services:
  # å‰ç«¯åº”ç”¨
  frontend:
    build:
      context: ./frontend
      dockerfile: Dockerfile
    ports:
      - "3000:3000"
    environment:
      - VITE_JAVA_SERVICE_URL=http://java-service:8080/api/v1
      - VITE_AI_SERVICE_URL=http://python-ai-service:8001/api/v1
    depends_on:
      - java-service
      - python-ai-service

  # Javaä¸šåŠ¡æœåŠ¡
  java-service:
    build:
      context: ./java-service
      dockerfile: Dockerfile
    ports:
      - "8080:8080"
    environment:
      - SPRING_PROFILES_ACTIVE=production
      - SPRING_DATASOURCE_URL=jdbc:postgresql://postgres:5432/aibid
      - SPRING_DATASOURCE_USERNAME=aibid_user
      - SPRING_DATASOURCE_PASSWORD=aibid_pass
      - SPRING_REDIS_HOST=redis
      - SPRING_REDIS_PORT=6379
      - AI_SERVICE_URL=http://python-ai-service:8001
    depends_on:
      - postgres
      - redis
      - elasticsearch

  # Python AIæœåŠ¡
  python-ai-service:
    build:
      context: ./python-ai-service
      dockerfile: Dockerfile
    ports:
      - "8001:8001"
    environment:
      - OPENAI_API_KEY=${OPENAI_API_KEY}
      - ANTHROPIC_API_KEY=${ANTHROPIC_API_KEY}
      - ELASTICSEARCH_URL=http://elasticsearch:9200
      - POSTGRES_URL=postgresql://aibid_user:aibid_pass@postgres:5432/aibid
      - REDIS_URL=redis://redis:6379/0
    depends_on:
      - postgres
      - redis
      - elasticsearch

  # PostgreSQLæ•°æ®åº“
  postgres:
    image: postgres:15-alpine
    ports:
      - "5432:5432"
    environment:
      - POSTGRES_DB=aibid
      - POSTGRES_USER=aibid_user
      - POSTGRES_PASSWORD=aibid_pass
    volumes:
      - postgres_data:/var/lib/postgresql/data
      - ./init-db.sql:/docker-entrypoint-initdb.d/init-db.sql

  # Redisç¼“å­˜
  redis:
    image: redis:7-alpine
    ports:
      - "6379:6379"
    volumes:
      - redis_data:/data
    command: redis-server --appendonly yes

  # Elasticsearchå‘é‡æ•°æ®åº“
  elasticsearch:
    image: elasticsearch:8.11.0
    ports:
      - "9200:9200"
      - "9300:9300"
    environment:
      - discovery.type=single-node
      - xpack.security.enabled=false
      - "ES_JAVA_OPTS=-Xms2g -Xmx2g"
    volumes:
      - es_data:/usr/share/elasticsearch/data

  # MinIOå¯¹è±¡å­˜å‚¨
  minio:
    image: minio/minio:latest
    ports:
      - "9000:9000"
      - "9001:9001"
    environment:
      - MINIO_ROOT_USER=admin
      - MINIO_ROOT_PASSWORD=adminpassword
    volumes:
      - minio_data:/data
    command: server /data --console-address ":9001"

volumes:
  postgres_data:
  redis_data:
  es_data:
  minio_data:
```

### JavaæœåŠ¡Dockerfile
```dockerfile
# java-service/Dockerfile
FROM maven:3.9-eclipse-temurin-17 AS build

WORKDIR /app

# å¤åˆ¶pom.xmlå¹¶ä¸‹è½½ä¾èµ–
COPY pom.xml .
RUN mvn dependency:go-offline

# å¤åˆ¶æºä»£ç å¹¶æ„å»º
COPY src ./src
RUN mvn clean package -DskipTests

# è¿è¡Œé˜¶æ®µ
FROM eclipse-temurin:17-jre-alpine

WORKDIR /app

# å¤åˆ¶jaræ–‡ä»¶
COPY --from=build /app/target/*.jar app.jar

# æš´éœ²ç«¯å£
EXPOSE 8080

# å¯åŠ¨åº”ç”¨
ENTRYPOINT ["java", "-jar", "app.jar"]
```

### PythonæœåŠ¡Dockerfile
```dockerfile
# python-ai-service/Dockerfile
FROM python:3.11-slim

WORKDIR /app

# å®‰è£…ç³»ç»Ÿä¾èµ–
RUN apt-get update && apt-get install -y \
    gcc \
    g++ \
    && rm -rf /var/lib/apt/lists/*

# å¤åˆ¶requirements.txtå¹¶å®‰è£…ä¾èµ–
COPY requirements.txt .
RUN pip install --no-cache-dir -r requirements.txt

# å¤åˆ¶åº”ç”¨ä»£ç 
COPY . .

# æš´éœ²ç«¯å£
EXPOSE 8001

# å¯åŠ¨åº”ç”¨
CMD ["uvicorn", "app.main:app", "--host", "0.0.0.0", "--port", "8001"]
```

### Pythonä¾èµ–é…ç½®
```txt
# python-ai-service/requirements.txt
fastapi==0.104.1
uvicorn[standard]==0.24.0
pydantic==2.5.0
pydantic-settings==2.1.0

# AIæ¡†æ¶
llama-index==0.9.20
llama-index-vector-stores-elasticsearch==0.1.2
langchain==0.1.0
langchain-openai==0.0.2

# LLMå®¢æˆ·ç«¯
openai==1.6.0
anthropic==0.8.0

# æ•°æ®åº“å’Œç¼“å­˜
elasticsearch==8.11.0
redis==5.0.1
asyncpg==0.29.0
sqlalchemy==2.0.23

# å·¥å…·åº“
python-dotenv==1.0.0
python-multipart==0.0.6
python-jose[cryptography]==3.3.0
passlib[bcrypt]==1.7.4
```

---

*æ–‡æ¡£ç‰ˆæœ¬: v2.0*
*åˆ›å»ºæ—¶é—´: 2025å¹´11æœˆ15æ—¥*
*æ›´æ–°æ—¶é—´: 2025å¹´11æœˆ26æ—¥*

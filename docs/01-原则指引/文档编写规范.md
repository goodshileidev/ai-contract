---
文档类型: 规范文档
需求编号: SPEC-2025-11-001
创建日期: 2025-11-30 11:50
创建者: claude-opus-4-1-20250805
最后更新: 2025-11-30 11:50
更新者: claude-opus-4-1-20250805
状态: 已批准
---

# AI标书平台 - 文档编写规范

## 1. 总体原则

### 1.1 文档分层原则

每个文档目录有明确的职责边界，严禁内容越界：

| 目录 | 关注点 | 受众 | 禁止内容 |
|------|--------|------|----------|
| 01-原则指引 | Why（为什么） | 所有人 | 具体实现 |
| 02-需求定义 | What（做什么） | 产品、业务 | 技术细节 |
| 03-架构设计 | How（怎么做）- 宏观 | 架构师 | 代码实现 |
| 04-业务设计 | How（怎么做）- 业务 | 业务分析师 | 源代码 |
| 05-编码实现 | How（怎么做）- 代码 | 开发者 | 业务理论 |
| 06-测试验证 | How to Test | 测试人员 | 实现代码 |
| 07-交付部署 | How to Deploy | 运维人员 | 业务逻辑 |

### 1.2 内容隔离原则

- **设计与实现分离**：设计文档不包含实现代码
- **业务与技术分离**：业务文档不涉及技术细节
- **原理与代码分离**：算法原理用伪代码或文字描述

## 2. 文档命名规范

### 2.1 文件命名格式

```
XX-文档标题.md

其中：
- XX: 两位数字编号（00-99）
- 文档标题: 简明扼要的中文标题
- 扩展名: 统一使用.md
```

### 2.2 编号规则

- `00`: 总览/索引文档
- `01-09`: 核心文档（必需）
- `10-19`: 扩展文档（重要）
- `20-29`: 补充文档（可选）
- `30+`: 附加文档

### 2.3 临时文档命名

临时报告、分析文档使用时间戳：

```
文档描述_YYYY-MM-DD-HHMM.md
```

示例：`性能分析报告_2025-11-30-1430.md`

## 3. 文档结构规范

### 3.1 必需的元信息头部

每个文档必须包含7个元信息字段：

```yaml
---
文档类型: [需求/设计/实现/测试]文档
需求编号: REQ-YYYY-MM-NNN
创建日期: YYYY-MM-DD
创建者: [作者名称]
最后更新: YYYY-MM-DD
更新者: [更新者名称]
状态: [草稿/评审中/已批准/已实现]
---
```

### 3.2 标准章节结构

```markdown
# 文档标题

## 1. 概述
简要说明文档目的和范围

## 2. 背景与目标
说明为什么需要这个文档

## 3. 主体内容
根据文档类型组织内容

## 4. 总结
关键要点总结

## 修改历史
| 日期 | 版本 | 修改者 | 修改内容概要 |
```

## 4. 各层文档内容规范

### 4.1 需求定义层（02）

**应该包含**：
- 业务需求描述
- 用户故事
- 功能清单
- 验收标准
- 业务流程图（使用Mermaid）

**不应该包含**：
- 技术实现方案
- 数据库设计
- API设计
- 任何代码

### 4.2 架构设计层（03）

**应该包含**：
- 系统架构图（使用Mermaid）
- 技术栈选型及理由
- 部署架构
- 数据流图
- 性能指标
- 接口规范（概要）

**不应该包含**：
- 具体的类设计
- 源代码实现
- 详细的API参数

### 4.3 业务设计层（04）

**应该包含**：
- 算法原理说明
- 业务流程设计（Mermaid图）
- 数据模型（概念层）
- 接口定义（输入输出）
- 伪代码（如需要）

**不应该包含**：
- ❌ Python/Java/JS等实现代码
- ❌ import语句
- ❌ class定义
- ❌ 具体的函数实现

**正确示例**：

```markdown
### 算法流程

1. 接收输入数据
2. 数据预处理
   - 去除空值
   - 标准化
3. 特征提取
4. 模型预测
5. 结果后处理

### 伪代码

```
FUNCTION generateContent(requirements, template):
    plan = planContent(requirements)
    content = generateByPlan(plan)
    IF quality < threshold:
        content = optimize(content)
    RETURN content
```
```

**错误示例**：

```python
# ❌ 不要在业务设计中包含实际代码
class ContentGenerator:
    def __init__(self):
        self.model = load_model()

    def generate(self, req):
        return self.model.predict(req)
```

### 4.4 编码实现层（05）

**应该包含**：
- ✅ 完整的源代码
- ✅ 配置文件
- ✅ 安装部署脚本
- ✅ 测试代码
- ✅ 技术实现细节

**不应该包含**：
- 业务原理解释
- 算法理论推导
- 需求分析

## 5. 图表规范

### 5.1 使用Mermaid而非ASCII图

**正确**：
```mermaid
graph LR
    A[输入] --> B[处理]
    B --> C[输出]
```

**错误**：
```
输入 ──→ 处理 ──→ 输出
```

### 5.2 常用图表类型

| 场景 | 推荐图表 | Mermaid类型 |
|------|---------|-------------|
| 流程 | 流程图 | graph/flowchart |
| 时序 | 时序图 | sequenceDiagram |
| 架构 | 架构图 | graph TB |
| 状态 | 状态图 | stateDiagram |
| 关系 | 类图 | classDiagram |

## 6. 文档长度控制

- 单个文档不超过1000行
- 超过500行考虑拆分
- 使用主文档+子文档结构

## 7. 质量检查清单

### 7.1 编写前检查

- [ ] 确认文档属于正确的目录
- [ ] 理解该层文档的内容要求
- [ ] 准备必要的元信息

### 7.2 编写中检查

- [ ] 不包含越界内容
- [ ] 使用标准图表语言
- [ ] 遵循命名规范

### 7.3 编写后检查

- [ ] 元信息完整（7个字段）
- [ ] 修改历史已更新
- [ ] 无实现代码混入设计文档
- [ ] 文档长度合理（<1000行）

## 8. 违规示例

### 8.1 常见违规

| 违规类型 | 示例 | 正确做法 |
|---------|------|---------|
| 设计包含代码 | 业务设计中有class定义 | 使用伪代码或文字描述 |
| 命名不规范 | `用户管理.md` | `01-用户管理.md` |
| 缺少元信息 | 无文档头部 | 添加7字段元信息 |
| 图表不规范 | ASCII手绘图 | 使用Mermaid |
| 内容越界 | 需求文档讲技术实现 | 只描述业务需求 |

## 9. 自动化检查

### 9.1 检查脚本

```bash
# 检查文档是否包含代码
check_code_in_design() {
    echo "检查业务设计文档中的代码..."
    grep -r "class\|import\|function\|def" docs/04-业务设计/ \
        --include="*.md" | head -20
}

# 检查文件命名
check_naming() {
    echo "检查文件命名规范..."
    find docs -name "*.md" | grep -v "[0-9][0-9]-" | head -20
}

# 检查文档长度
check_length() {
    echo "检查超长文档..."
    find docs -name "*.md" -exec wc -l {} \; | \
        awk '$1 > 1000 {print}'
}
```

## 10. 改进建议

1. **定期审查**：每月审查文档质量
2. **培训分享**：新成员必须学习此规范
3. **工具支持**：开发VSCode插件检查规范
4. **模板提供**：为每类文档提供模板

---

## 修改历史

| 日期 | 版本 | 修改者 | 修改内容概要 |
|------|------|--------|-------------|
| 2025-11-30 11:50 | 1.0 | claude-opus-4-1-20250805 | 创建文档编写规范 |
---
doc_type: Design
req_id: ARCH-2025-11-003-05
created_at: 2025-11-30 00:25
author: gemini-pro
updated_at: 2025-11-30 00:25
updater: gemini-pro
status: Draft
---

# 05-数据安全与隐私设计

## 1. 概述

本文档旨在详细描述AI标书智能创作平台的数据安全与隐私设计，确保平台存储、处理和传输的所有数据都受到严格保护，符合相关法律法规要求，并建立用户对平台数据安全性的信任。数据安全是企业级应用的核心生命线。

## 2. 设计原则

*   **最小权限原则**: 授予用户和系统组件完成其职责所需的最低权限。
*   **纵深防御**: 采用多层安全机制，即使一层被攻破，仍有其他层提供保护。
*   **默认安全**: 在设计和实现时，默认采取最严格的安全措施。
*   **合规性优先**: 确保所有数据处理活动符合国家及行业的数据安全与隐私法规。
*   **透明可审计**: 所有敏感操作可追溯，并提供清晰的审计日志。

## 3. 数据分类与分级

对平台处理的数据进行分类和分级，以便采取不同程度的保护措施。

### 3.1 数据分类

*   **用户数据**: 用户ID、姓名、邮箱、联系方式、登录凭据（密码哈希）。
*   **企业数据**: 企业名称、资质信息、联系方式、项目信息、历史标书、企业能力库内容。
*   **标书数据**: 招标文件内容、生成的标书内容（技术方案、商务方案）、审批记录。
*   **AI相关数据**: LLM调用日志、Prompt模板、AI生成结果、向量数据。
*   **系统数据**: 操作日志、监控指标、配置信息。

### 3.2 数据分级 (示例)

*   **一级数据（绝密）**: 用户密码哈希、API密钥、数字证书私钥、未脱敏的敏感标书数据（如商业机密、未公开技术方案）。
    *   **保护措施**: 强加密存储、严格访问控制、独立隔离、定期审计。
*   **二级数据（机密）**: 用户ID、企业名称、项目名称、脱敏后的标书内容、知识图谱核心实体。
    *   **保护措施**: 加密存储、基于角色的访问控制、日志审计。
*   **三级数据（内部）**: 公开的模板内容、系统运行日志、监控指标。
    *   **保护措施**: 常规访问控制、日志记录。

## 4. 数据加密

### 4.1 传输加密 (Data in Transit)

*   **HTTPS/TLS**: 所有客户端与服务器之间、以及服务间（如API网关到微服务）的通信必须使用HTTPS协议，强制采用TLS 1.2或更高版本。
*   **内部服务间通信**: 微服务间通信（HTTP/gRPC）应优先采用 mTLS (Mutual TLS) 或通过Service Mesh（如Istio）进行加密，确保内部数据传输安全。
*   **数据库连接**: 所有应用服务与数据库的连接必须加密（如PostgreSQL的SSL连接）。

### 4.2 存储加密 (Data at Rest)

*   **数据库加密**:
    *   **PostgreSQL**: 敏感数据字段（如用户密码哈希）进行应用层加密或使用PostgreSQL提供的透明数据加密（TDE）功能。
    *   **Elasticsearch**: 索引数据加密，可以利用云提供商的加密存储服务，或Elasticsearch自身的加密功能。
    *   **Neo4j**: 数据库文件系统级别加密，或利用云提供商的加密存储服务。
*   **文件存储加密**: MinIO中存储的招标文件和生成标书等文件，应开启服务器端加密（SSE），并可选择客户端加密（CSE）。
*   **备份加密**: 所有数据备份文件必须加密存储。

## 5. 访问控制与认证授权

### 5.1 用户认证 (Authentication)

*   **多因素认证 (MFA)**: 对于特权用户或敏感操作，强制要求多因素认证。
*   **会话管理**: 采用基于JWT的无状态认证机制，JWT令牌具有有效期和刷新机制。
*   **密码策略**: 强制用户设置强密码，并定期提醒更换。
*   **防暴力破解**: 限制登录尝试次数，并引入验证码机制。

### 5.2 用户授权 (Authorization)

*   **基于角色的访问控制 (RBAC)**:
    *   定义清晰的角色（如系统管理员、项目经理、普通用户、只读用户等）。
    *   为每个角色分配最小化权限，并细化到项目、文档、甚至章节级别的操作权限。
*   **多租户隔离**:
    *   所有业务数据（项目、文档、企业能力等）必须通过 `tenant_id` 或 `company_id` 进行严格逻辑隔离。
    *   API请求在处理前必须验证用户所属租户与请求资源租户的一致性。

### 5.3 服务间认证授权

*   **内部API密钥/JWT**: 微服务之间调用API时，使用内部API密钥或签名的JWT进行认证和授权。
*   **OIDC/OAuth2**: 与第三方服务集成时，使用OIDC/OAuth2协议进行身份联邦和授权。

## 6. 日志审计与安全监控

*   **审计日志**:
    *   记录所有用户的登录、登出、关键数据修改、权限变更、敏感操作等行为。
    *   日志内容应包含操作时间、操作者、操作类型、影响对象、操作结果和IP地址等。
*   **集中化日志管理**: 使用ELK Stack等工具收集、存储、查询和分析所有审计日志和系统日志。
*   **安全监控**:
    *   实时监控异常登录行为、异常API访问模式、数据传输量异常等。
    *   集成安全信息和事件管理（SIEM）系统，及时发现和响应安全威胁。
*   **定期安全审计**: 定期对系统进行安全审计和漏洞扫描，确保安全策略的有效性。

## 7. 数据备份与恢复

*   **备份策略**:
    *   **全量备份**: 每周对所有数据库进行一次全量备份。
    *   **增量备份**: 每天对所有数据库进行增量备份。
    *   **异地备份**: 将备份数据复制到异地存储，防止单点故障。
*   **恢复策略**:
    *   定期进行数据恢复演练，验证备份数据的完整性和可用性。
    *   制定详细的数据恢复预案，明确恢复步骤和责任人。
*   **备份加密**: 所有备份数据必须加密存储。

## 8. 数据隐私与合规性

*   **匿名化/假名化**: 对非必要使用的个人敏感数据进行匿名化或假名化处理。
*   **数据最小化**: 仅收集和处理业务所需的最少量数据。
*   **数据保留策略**: 明确数据保留期限，并按期自动清理过期数据。
*   **用户权利**: 确保用户拥有访问、修改、删除其个人数据的权利。
*   **合规性认证**: 积极争取通过国家相关数据安全和隐私认证，如ISO 27001、等保三级等。
*   **GDPR/《个人信息保护法》**: 确保所有数据处理活动符合相关法规要求，尤其是对于个人信息处理。

---

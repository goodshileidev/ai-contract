---
æ–‡æ¡£ç±»å‹: æ¶æ„æ–‡æ¡£
éœ€æ±‚ç¼–å·: DOC-2025-11-001
created_at: 2025-11-29
author: claude-sonnet-4-5 (claude-sonnet-4-5-20250929)
updated_at: 2025-11-30 00:25
updater: gemini-pro
status: å·²æ‰¹å‡†
---

# AIæ ‡ä¹¦æ™ºèƒ½åˆ›ä½œå¹³å° - éƒ¨ç½²è¿ç»´æ¶æ„

> **å®¹å™¨åŒ–**: Docker + Docker Compose
> **ç¼–æ’**: Kubernetes 1.28+
> **ç›‘æ§**: Prometheus + Grafana + ELK Stack
> **å®‰å…¨**: HTTPS/TLS + JWT + æ•°æ®åŠ å¯†

## ğŸ“‹ æ–‡æ¡£å¯¼èˆª

æœ¬æ–‡æ¡£æ˜¯æŠ€æœ¯æ¶æ„è®¾è®¡çš„ä¸€éƒ¨åˆ†,å…¶ä»–ç›¸å…³æ–‡æ¡£:

1. [00-æŠ€æœ¯æ¶æ„æ€»è§ˆ.md](./00-æŠ€æœ¯æ¶æ„æ€»è§ˆ.md) - æ•´ä½“æ¶æ„å’Œå‰ç«¯æŠ€æœ¯æ¶æ„
2. [01-åç«¯æœåŠ¡æ¶æ„.md](./01-åç«¯æœåŠ¡æ¶æ„.md) - Javaå’ŒPythonæœåŠ¡æ¶æ„è¯¦è§£
3. [02-AIèƒ½åŠ›æ¶æ„æ¦‚è¿°.md](./02-AIèƒ½åŠ›æ¶æ„æ¦‚è¿°.md) - AIæœåŠ¡æ¶æ„è®¾è®¡æ¦‚è¿°
4. [03-æ•°æ®å­˜å‚¨æ¶æ„.md](./03-æ•°æ®å­˜å‚¨æ¶æ„.md) - æ•°æ®å­˜å‚¨å’Œæ¶ˆæ¯é˜Ÿåˆ—æ¶æ„
5. **04-éƒ¨ç½²è¿ç»´æ¶æ„.md**(æœ¬æ–‡æ¡£)- éƒ¨ç½²ã€å®‰å…¨å’Œç›‘æ§æ¶æ„

## ğŸš€ éƒ¨ç½²æ¶æ„

### å®¹å™¨åŒ–éƒ¨ç½²
```yaml
# docker-compose.yml
version: '3.8'

services:
  # å‰ç«¯åº”ç”¨
  frontend:
    build: ./frontend
    ports:
      - "3000:3000"
    environment:
      - REACT_APP_API_URL=http://gateway:8000

  # APIç½‘å…³
  gateway:
    build: ./services/gateway
    ports:
      - "8000:8000"
    depends_on:
      - java-service
      - python-ai-service

  # Javaä¸šåŠ¡æœåŠ¡ï¼ˆSpring Bootï¼‰
  java-service:
    build: ./services/java-service
    ports:
      - "8080:8080"
    environment:
      - SPRING_DATASOURCE_URL=jdbc:postgresql://postgres:5432/aibid
      - SPRING_REDIS_HOST=redis
      - SPRING_REDIS_PORT=6379
      - AI_SERVICE_URL=http://python-ai-service:8001
    depends_on:
      - postgres
      - redis
      - elasticsearch
      - neo4j

  # Python AIæœåŠ¡ï¼ˆFastAPIï¼‰
  python-ai-service:
    build: ./services/python-ai-service
    ports:
      - "8001:8001"
    environment:
      # ä»¥ä¸‹ç¯å¢ƒå˜é‡éœ€æ‰‹åŠ¨æ·»åŠ  Neo4j URI
      - OPENAI_API_KEY=${OPENAI_API_KEY}
      - ANTHROPIC_API_KEY=${ANTHROPIC_API_KEY}
      - ELASTICSEARCH_URL=http://elasticsearch:9200
      - NEO4J_URI=bolt://neo4j:7687
      - POSTGRES_URL=postgresql://user:pass@postgres:5432/aibid
    depends_on:
      - postgres
      - redis
      - elasticsearch
      - neo4j

  # æ•°æ®åº“
  postgres:
    image: postgres:15
    environment:
      - POSTGRES_DB=aibid
      - POSTGRES_USER=user
      - POSTGRES_PASSWORD=pass
    volumes:
      - postgres_data:/var/lib/postgresql/data

  # ç¼“å­˜
  redis:
    image: redis:7-alpine
    volumes:
      - redis_data:/data

  # Elasticsearchï¼ˆå‘é‡æ•°æ®åº“ï¼‰
  elasticsearch:
    image: elasticsearch:8.11.0
    environment:
      - discovery.type=single-node
      - xpack.security.enabled=false
      - "ES_JAVA_OPTS=-Xms2g -Xmx2g"
    volumes:
      - es_data:/usr/share/elasticsearch/data

  # Neo4jï¼ˆå›¾æ•°æ®åº“ï¼‰
  neo4j:
    image: neo4j:latest
    ports:
      - "7474:7474" # HTTP
      - "7687:7687" # Bolt
    environment:
      - NEO4J_AUTH=neo4j/password # ç”Ÿäº§ç¯å¢ƒè¯·ä½¿ç”¨æ›´å®‰å…¨çš„è®¤è¯æ–¹å¼
    volumes:
      - neo4j_data:/data

  # æ–‡ä»¶å­˜å‚¨
  minio:
    image: minio/minio:latest
    command: server /data --console-address ":9001"
    environment:
      - MINIO_ROOT_USER=admin
      - MINIO_ROOT_PASSWORD=password
    volumes:
      - minio_data:/data

volumes:
  # ä»¥ä¸‹å·éœ€æ‰‹åŠ¨æ·»åŠ  neo4j_data
  postgres_data:
  redis_data:
  es_data:
  neo4j_data:
  minio_data:
```

### Kuberneteséƒ¨ç½²

# ä»¥ä¸‹ K8s éƒ¨ç½²å®šä¹‰éœ€æ‰‹åŠ¨æ·»åŠ  `neo4j` StatefulSet
# ---
# apiVersion: apps/v1
# kind: StatefulSet
# metadata:
#   name: neo4j
# spec:
#   selector:
#     matchLabels:
#       app: neo4j
#   serviceName: "neo4j"
#   replicas: 1
#   template:
#     metadata:
#       labels:
#         app: neo4j
#     spec:
#       containers:
#       - name: neo4j
#         image: neo4j:latest
#         ports:
#         - containerPort: 7474
#         - containerPort: 7687
#         env:
#         - name: NEO4J_AUTH
#           value: "neo4j/password"
#         volumeMounts:
#         - name: neo4j-data
#           mountPath: /data
#   volumeClaimTemplates:
#   - metadata:
#       name: neo4j-data
#     spec:
#       accessModes: [ "ReadWriteOnce" ]
#       resources:
#         requests:
#           storage: 10Gi
# ---

```yaml
# k8s-deployment.yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: java-service
spec:
  replicas: 3
  selector:
    matchLabels:
      app: java-service
  template:
    metadata:
      labels:
        app: java-service
    spec:
      containers:
      - name: java-service
        image: aibid/java-service:latest
        ports:
        - containerPort: 8080
        env:
        - name: SPRING_PROFILES_ACTIVE
          value: "production"
        - name: AI_SERVICE_URL
          value: "http://python-ai-service:8001"
        resources:
          requests:
            memory: "512Mi"
            cpu: "500m"
          limits:
            memory: "1Gi"
            cpu: "1000m"
---
apiVersion: apps/v1
kind: Deployment
metadata:
  name: python-ai-service
spec:
  replicas: 2
  selector:
    matchLabels:
      app: python-ai-service
  template:
    metadata:
      labels:
        app: python-ai-service
    spec:
      containers:
      - name: python-ai-service
        image: aibid/python-ai-service:latest
        ports:
        - containerPort: 8001
        env:
        - name: ELASTICSEARCH_URL
          value: "http://elasticsearch:9200"
        resources:
          requests:
            memory: "1Gi"
            cpu: "1000m"
          limits:
            memory: "2Gi"
            cpu: "2000m"
---
apiVersion: v1
kind: Service
metadata:
  name: java-service
spec:
  selector:
    app: java-service
  ports:
  - port: 8080
    targetPort: 8080
  type: ClusterIP
---
apiVersion: v1
kind: Service
metadata:
  name: python-ai-service
spec:
  selector:
    app: python-ai-service
  ports:
  - port: 8001
    targetPort: 8001
  type: ClusterIP
```

## ğŸ”’ å®‰å…¨æ¶æ„

### è®¤è¯æˆæƒ
```java
// Spring Security JWTè®¤è¯é…ç½®
@Configuration
@EnableWebSecurity
@EnableMethodSecurity
public class SecurityConfig {

    @Bean
    public SecurityFilterChain filterChain(HttpSecurity http) throws Exception {
        http
            .csrf(csrf -> csrf.disable())
            .authorizeHttpRequests(auth -> auth
                .requestMatchers("/api/v1/auth/**").permitAll()
                .requestMatchers("/api/v1/admin/**").hasRole("ADMIN")
                .anyRequest().authenticated()
            )
            .sessionManagement(session -> session
                .sessionCreationPolicy(SessionCreationPolicy.STATELESS)
            )
            .addFilterBefore(jwtAuthenticationFilter(),
                UsernamePasswordAuthenticationFilter.class);

        return http.build();
    }

    @Bean
    public JwtAuthenticationFilter jwtAuthenticationFilter() {
        return new JwtAuthenticationFilter();
    }
}
```

### æ•°æ®å®‰å…¨
```typescript
// æ•°æ®åŠ å¯†ç­–ç•¥
interface DataSecurity {
  // ä¼ è¾“åŠ å¯†
  transport: {
    protocol: "HTTPS/TLS 1.3";
    certificate: "Wildcard SSL Certificate";
  };

  // å­˜å‚¨åŠ å¯†
  storage: {
    database: "AES-256 encryption";
    files: "Server-side encryption";
    backups: "Encrypted backups";
  };

  // æ•æ„Ÿæ•°æ®å¤„ç†
  sensitiveData: {
    password: "Bcrypt hashing";
    apiKeys: "Encrypted at rest";
    documents: "Granular access control";
  };
}
```

## ğŸ“Š ç›‘æ§ä¸è¿ç»´

### ç›‘æ§ä½“ç³»
```yaml
# ç›‘æ§æŒ‡æ ‡
monitoring:
  # ç³»ç»ŸæŒ‡æ ‡
  system:
    - CPUä½¿ç”¨ç‡
    - å†…å­˜ä½¿ç”¨ç‡
    - ç£ç›˜ä½¿ç”¨ç‡
    - ç½‘ç»œæµé‡

  # åº”ç”¨æŒ‡æ ‡
  application:
    - APIå“åº”æ—¶é—´
    - è¯·æ±‚æˆåŠŸç‡
    - å¹¶å‘ç”¨æˆ·æ•°
    - é”™è¯¯ç‡

  # ä¸šåŠ¡æŒ‡æ ‡
  business:
    - æ ‡ä¹¦ç”Ÿæˆæ•°é‡
    - ç”¨æˆ·æ´»è·ƒåº¦
    - AIè°ƒç”¨é‡
    - è´¨é‡è¯„åˆ†

# æ—¥å¿—ç®¡ç†
logging:
  level: INFO
  format: JSON
  aggregation: ELK Stack
  retention: 90 days
```

### æ€§èƒ½ä¼˜åŒ–
```typescript
// æ€§èƒ½ä¼˜åŒ–ç­–ç•¥
interface PerformanceOptimization {
  // å‰ç«¯ä¼˜åŒ–
  frontend: {
    codeSplitting: "Route-based code splitting";
    lazyLoading: "Component lazy loading";
    caching: "Service worker caching";
    compression: "Gzip/Brotli compression";
  };

  // JavaæœåŠ¡ä¼˜åŒ–
  javaService: {
    database: "Connection pooling, query optimization";
    caching: "Multi-level caching (Redis)";
    async: "CompletableFuture async processing";
    loadBalancing: "Load balancer configuration";
  };

  // Python AIæœåŠ¡ä¼˜åŒ–
  pythonService: {
    modelCaching: "Model response caching";
    batching: "Request batching";
    vectorSearch: "Elasticsearch optimization";
    fallback: "Model fallback strategy";
  };
}
```

## ğŸ”— ç›¸å…³æ–‡æ¡£

- **æŠ€æœ¯æ¶æ„æ€»è§ˆ**: [00-æŠ€æœ¯æ¶æ„æ€»è§ˆ.md](./00-æŠ€æœ¯æ¶æ„æ€»è§ˆ.md)
- **åç«¯æœåŠ¡æ¶æ„**: [01-åç«¯æœåŠ¡æ¶æ„.md](./01-åç«¯æœåŠ¡æ¶æ„.md)
- **AIèƒ½åŠ›æ¶æ„**: [02-AIèƒ½åŠ›æ¶æ„æ¦‚è¿°.md](./02-AIèƒ½åŠ›æ¶æ„æ¦‚è¿°.md)
- **æ•°æ®å­˜å‚¨æ¶æ„**: [03-æ•°æ®å­˜å‚¨æ¶æ„.md](./03-æ•°æ®å­˜å‚¨æ¶æ„.md)
- **éƒ¨ç½²æ¶æ„è¯¦ç»†è®¾è®¡**: [@docs/03-æ¶æ„è®¾è®¡/06-éƒ¨ç½²æ¶æ„è®¾è®¡/](../06-éƒ¨ç½²æ¶æ„è®¾è®¡/)
- **å®‰å…¨æ¶æ„è¯¦ç»†è®¾è®¡**: [@docs/03-æ¶æ„è®¾è®¡/07-å®‰å…¨æ¶æ„è®¾è®¡.md](../07-å®‰å…¨æ¶æ„è®¾è®¡.md)

## ä¿®æ”¹å†å²

| æ—¥æœŸ | ç‰ˆæœ¬ | ä¿®æ”¹è€… | ä¿®æ”¹å†…å®¹æ¦‚è¦ |
|------|------|--------|-------------|
| 2025-11-30 00:25 | 1.1 | gemini-pro | æ˜ç¡®Elasticsearchä¸ºå‘é‡æ£€ç´¢ï¼ŒNeo4jä¸ºå›¾æ•°æ®åº“ï¼Œå¹¶æ›´æ–°Docker Composeå’ŒKuberneteséƒ¨ç½²é…ç½®ã€‚ |
| 2025-11-29 | 1.0 | claude-sonnet-4-5 (claude-sonnet-4-5-20250929) | ä»02-æŠ€æœ¯æ¶æ„è®¾è®¡.mdæ‹†åˆ†åˆ›å»ºéƒ¨ç½²è¿ç»´æ¶æ„æ–‡æ¡£ |

---

**æ–‡æ¡£ç‰ˆæœ¬**: v1.0
**åˆ›å»ºæ—¶é—´**: 2025å¹´11æœˆ29æ—¥
**æ–‡æ¡£çŠ¶æ€**: âœ… å·²æ‰¹å‡†

---
doc_type: Design
req_id: ARCH-2025-11-003
created_at: 2025-11-29 11:30
author: gemini-pro
updated_at: 2025-11-29 11:30
updater: gemini-pro
status: Draft
---

# 00-数据架构设计总览

## 1. 概述

本文档旨在提供AI标书智能创作平台的数据架构总览，涵盖数据流、数据存储、数据管理、数据安全及数据生命周期等方面。数据架构是支撑业务功能和应用架构的基础，确保数据的准确性、一致性、完整性和可用性。

## 2. 数据架构视图

平台的数据架构主要分为以下几个视图：

*   **概念数据模型**：高层次的数据实体及其关系，独立于具体技术实现。
*   **逻辑数据模型**：基于概念模型，结合业务规则和数据属性，但仍独立于具体数据库产品。
*   **物理数据模型**：针对选定的数据库产品（如PostgreSQL），设计具体的表结构、索引、视图、存储过程等。
*   **数据流模型**：描述数据在系统内部（服务之间）和外部（与第三方系统）的流动路径和转换过程。
*   **数据管理模型**：包括数据安全、数据质量、主数据管理、数据归档策略等。

## 3. 核心数据实体

平台的核心数据实体包括但不限于：

*   **用户 (User)**：用户账户信息、权限角色等。
*   **组织/企业 (Organization/Company)**：企业基本信息、团队成员等。
*   **项目 (Project)**：投标项目基本信息、状态、参与人员等。
*   **招标文件 (Bidding Document)**：已上传的招标文件、解析结果、关键信息。
*   **标书文档 (Bid Proposal)**：生成的标书草稿、版本历史、协作内容。
*   **企业能力 (Enterprise Capability)**：产品服务、项目经验、人员资质、历史标书等知识图谱实体。
*   **模板 (Template)**：标书模板、行业模板、企业自定义模板。
*   **审批流程 (Approval Workflow)**：审批实例、任务、记录。
*   **通知 (Notification)**：系统通知、任务提醒等。

## 4. 数据存储技术选型

*   **关系型数据库**：PostgreSQL (核心业务数据、结构化数据)
    *   **特点**：强一致性、事务支持、复杂查询。
    *   **用途**：用户、项目、文档元数据、审批记录、模板配置、权限等。
*   **向量检索**：Elasticsearch (基于其向量搜索能力)
    *   **特点**：高效存储和检索高维向量，与全文搜索整合。
    *   **用途**：知识图谱中的实体和关系向量、招标文件和企业能力的语义向量。
*   **图数据库**：Neo4j (企业知识图谱、关联分析)
    *   **特点**：专门用于高效存储、查询和分析图结构数据。
    *   **用途**：知识图谱中的实体、关系、属性，支撑复杂关联分析。
*   **缓存数据库**：Redis (会话管理、热点数据、消息队列)
    *   **特点**：高性能读写、数据结构丰富。
    *   **用途**：用户会话、频繁访问数据缓存、异步任务队列。
*   **文件存储**：MinIO (非结构化文档、大文件)
    *   **特点**：兼容S3协议、可扩展、高可靠。
    *   **用途**：原始招标文件、生成的标书文件、企业资质证明图片等。

## 5. 数据流设计

*   **招标文件解析数据流**：
    1.  用户上传招标文件至MinIO。
    2.  文件路径传递给Python FastAPI服务。
    3.  Python服务进行智能解析，提取关键信息。
    4.  结构化关键信息存储至PostgreSQL。
    5.  文本内容生成向量，存储至Elasticsearch进行向量检索。
*   **标书生成数据流**：
    1.  用户在Java服务中触发标书生成请求。
    2.  Java服务调用Python服务（AI助手矩阵）进行内容生成。
    3.  Python服务从PostgreSQL获取项目/模板信息，从Elasticsearch检索企业能力/案例向量，从Neo4j检索知识图谱关联数据。
    4.  生成的内容返回给Java服务，存储至PostgreSQL。
*   **企业知识图谱数据流**：
    1.  数据源（历史标书、项目经验、人员资质）录入或自动抽取。
    2.  Python FastAPI服务进行实体抽取、关系构建、向量化。
    3.  实体、关系存储至Neo4j，部分元数据存储至PostgreSQL，实体向量存储至Elasticsearch。
    4.  知识图谱可视化数据通过API提供给前端。

## 6. 数据安全与合规

*   **数据加密**：
    *   **传输加密**：所有数据传输（前端↔后端、服务间）使用HTTPS/SSL/TLS。
    *   **存储加密**：敏感数据（如用户密码、企业机密信息）在数据库中加密存储。
*   **访问控制**：
    *   基于角色的访问控制（RBAC）：精确控制用户对数据实体的操作权限。
    *   多租户数据隔离：通过 `tenant_id` 等字段确保不同企业数据严格隔离。
*   **审计与日志**：
    *   所有关键操作（数据修改、访问）进行审计日志记录，满足合规性要求。
*   **数据备份与恢复**：
    *   定期对所有数据库进行全量及增量备份，确保数据可恢复性。
*   **合规性**：
    *   遵循相关法律法规（如《网络安全法》、《数据安全法》等），确保数据处理过程合法合规。

## 7. 数据质量管理

*   **数据清洗**：对原始输入数据进行清洗和标准化。
*   **数据校验**：在数据录入和处理阶段进行数据类型、范围、格式等校验。
*   **数据一致性**：通过事务、主外键约束、数据同步机制保证数据一致性。
*   **数据治理**：建立数据标准、数据所有权、数据字典等治理规范。

## 8. 数据生命周期管理

*   **数据创建**：数据录入、导入、系统生成。
*   **数据存储**：选择合适的存储介质和策略。
*   **数据使用**：数据查询、分析、报告。
*   **数据归档**：历史数据或不常用数据进行归档，降低存储成本。
*   **数据销毁**：根据合规要求和业务需求，安全地销毁数据。

## 9. 详细设计文档

本总览文档将引用以下详细设计文档：

*   **01-关系型数据库设计.md**: 核心业务数据表的Schema定义，包含PostgreSQL。
*   **02-知识图谱数据模型.md**: 知识图谱的实体、关系模型设计，包含Neo4j。
*   **03-向量检索数据模型.md**: 向量数据存储和检索模型设计，包含Elasticsearch。
*   **04-数据流设计.md**: 平台内外数据流转、转换、集成设计。
*   **05-数据安全与隐私设计.md**: 数据加密、访问控制、合规性设计。
*   **06-数据质量与治理.md**: 数据清洗、校验、一致性与治理规范。
*   **07-数据生命周期管理.md**: 数据创建、存储、使用、归档、销毁策略。

---

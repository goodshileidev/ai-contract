# Python FastAPI AI 服务任务详细计划 - AI-003 - AI-003: 企业能力库向量化 - 二级任务 3.1: 产品服务向量化 - 2) 前端

##### 能力管理页面
```typescript
// src/pages/Capability/ProductList.tsx
import { ProTable, ProColumns } from '@ant-design/pro-table';
import { Button, Tag, Space, Modal, message } from 'antd';
import { PlusOutlined, SyncOutlined } from '@ant-design/icons';
import { useState } from 'react';

interface ProductCapability {
  id: string;
  name: string;
  category: string;
  description: string;
  features: string[];
  technologyStack: string[];
  embeddingStatus: 'pending' | 'completed' | 'failed';
  vectorizedAt?: string;
  tags: string[];
  isActive: boolean;
}

export default function ProductList() {
  const [selectedRows, setSelectedRows] = useState<ProductCapability[]>([]);

  const columns: ProColumns<ProductCapability>[] = [
    {
      title: '产品名称',
      dataIndex: 'name',
      width: 200,
      fixed: 'left',
      render: (text, record) => (
        <a onClick={() => handleView(record)}>{text}</a>
      ),
    },
    {
      title: '分类',
      dataIndex: 'category',
      width: 120,
      valueType: 'select',
      valueEnum: {
        software: { text: '软件产品' },
        hardware: { text: '硬件产品' },
        service: { text: '服务' },
        solution: { text: '解决方案' },
      },
    },
    {
      title: '描述',
      dataIndex: 'description',
      width: 300,
      ellipsis: true,
      search: false,
    },
    {
      title: '技术栈',
      dataIndex: 'technologyStack',
      width: 200,
      search: false,
      render: (_, record) => (
        <>
          {record.technologyStack.slice(0, 3).map(tech => (
            <Tag key={tech}>{tech}</Tag>
          ))}
          {record.technologyStack.length > 3 && (
            <Tag>+{record.technologyStack.length - 3}</Tag>
          )}
        </>
      ),
    },
    {
      title: '向量化状态',
      dataIndex: 'embeddingStatus',
      width: 120,
      valueType: 'select',
      valueEnum: {
        pending: { text: '待处理', status: 'Default' },
        completed: { text: '已完成', status: 'Success' },
        failed: { text: '失败', status: 'Error' },
      },
    },
    {
      title: '向量化时间',
      dataIndex: 'vectorizedAt',
      width: 160,
      valueType: 'dateTime',
      search: false,
    },
    {
      title: '标签',
      dataIndex: 'tags',
      width: 150,
      search: false,
      render: (_, record) => (
        <>
          {record.tags.map(tag => (
            <Tag key={tag} color="blue">{tag}</Tag>
          ))}
        </>
      ),
    },
    {
      title: '状态',
      dataIndex: 'isActive',
      width: 80,
      valueType: 'select',
      valueEnum: {
        true: { text: '启用', status: 'Success' },
        false: { text: '禁用', status: 'Default' },
      },
    },
    {
      title: '操作',
      width: 180,
      fixed: 'right',
      search: false,
      render: (_, record) => (
        <Space>
          <a onClick={() => handleEdit(record)}>编辑</a>
          <a onClick={() => handleVectorize(record)}>重新向量化</a>
          <a style={{ color: 'red' }} onClick={() => handleDelete(record)}>删除</a>
        </Space>
      ),
    },
  ];

  // 批量向量化
  const handleBatchVectorize = async () => {
    if (selectedRows.length === 0) {
      message.warning('请选择要向量化的产品');
      return;
    }

    Modal.confirm({
      title: '批量向量化确认',
      content: `确定要对选中的 ${selectedRows.length} 个产品进行向量化吗？`,
      onOk: async () => {
        try {
          const response = await fetch('http://localhost:8001/api/v1/ai/vectorize/batch', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({
              capability_ids: selectedRows.map(r => r.id),
              capability_type: 'product'
            })
          });

          const result = await response.json();
          message.success(`已提交 ${result.task_count} 个向量化任务`);
          setSelectedRows([]);
          // 刷新表格
        } catch (error) {
          message.error('批量向量化失败');
        }
      }
    });
  };

  return (
    <ProTable<ProductCapability>
      headerTitle="产品能力库"
      rowKey="id"
      columns={columns}
      request={async (params, sort, filter) => {
        // 调用Java服务API获取数据
        const response = await fetch(`http://localhost:8080/api/v1/capabilities/products?page=${params.current}&pageSize=${params.pageSize}`);
        const result = await response.json();
        return {
          data: result.data.items,
          total: result.data.total,
          success: true,
        };
      }}
      rowSelection={{
        selectedRowKeys: selectedRows.map(r => r.id),
        onChange: (_, selectedRows) => setSelectedRows(selectedRows),
      }}
      toolBarRender={() => [
        <Button key="add" type="primary" icon={<PlusOutlined />}>
          新建产品
        </Button>,
        <Button
          key="vectorize"
          icon={<SyncOutlined />}
          onClick={handleBatchVectorize}
          disabled={selectedRows.length === 0}
        >
          批量向量化 ({selectedRows.length})
        </Button>,
      ]}
      pagination={{
        pageSize: 20,
        showSizeChanger: true,
        showQuickJumper: true,
      }}
      scroll={{ x: 1500 }}
    />
  );
}
```

**验证标准**:
- [ ] ProTable能正常展示产品列表
- [ ] 搜索、分页、排序功能正常
- [ ] 批量选择和批量向量化功能正常
- [ ] 向量化状态实时更新

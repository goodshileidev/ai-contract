# AIæ ‡ä¹¦æ™ºèƒ½åˆ›ä½œå¹³å° - å¼€å‘ç¯å¢ƒé…ç½®æŒ‡å— - ğŸ³ï¸ æ•°æ®åº“é…ç½®

### PostgreSQLé…ç½®
```sql
-- åˆ›å»ºæ•°æ®åº“
CREATE DATABASE aibidcomposer;
CREATE DATABASE aibidcomposer_test;
CREATE DATABASE aibidcomposer_dev;

-- åˆ›å»ºç”¨æˆ·
CREATE USER aibidcomposer WITH PASSWORD 'your-secure-password';
GRANT ALL PRIVILEGES ON DATABASE aibidcomposer TO aibidcomposer;
GRANT ALL PRIVILEGES ON DATABASE aibidcomposer_test TO aibidcomposer;
GRANT ALL PRIVILEGES ON DATABASE aibidcomposer_dev TO aibidcomposer;

-- è¿æ¥åˆ°ä¸»æ•°æ®åº“
\c aibidcomposer

-- åˆ›å»ºæ‰©å±•
CREATE EXTENSION IF NOT EXISTS "uuid-ossp";
CREATE EXTENSION IF NOT EXISTS "pgcrypto";
CREATE EXTENSION IF NOT EXISTS "pg_trgm";
CREATE EXTENSION IF NOT EXISTS "vector";
CREATE EXTENSION IF NOT EXISTS "pg_stat_statements";

-- åˆ›å»ºç´¢å¼•ä¼˜åŒ–æŸ¥è¯¢æ€§èƒ½
CREATE INDEX CONCURRENTLY IF NOT EXISTS idx_projects_company_id ON projects(company_id);
CREATE INDEX CONCURRENTLY IF NOT EXISTS idx_users_company_id ON users(company_id);
CREATE INDEX CONCURRENTLY IF NOT EXISTS idx_documents_project_id ON documents(project_id);
CREATE INDEX CONCURRENTLY IF NOT EXISTS idx_templates_company_id ON templates(company_id);
CREATE INDEX CONCURRENTLY IF NOT EXISTS idx_enterprise_capabilities_company_id ON enterprise_capabilities(company_id);
CREATE INDEX CONCURRENTLY IF NOT EXISTS idx_ai_assistants_company_id ON ai_assistants(company_id);

-- åˆ›å»ºå…¨æ–‡æœç´¢ç´¢å¼•
CREATE INDEX CONCURRENTLY IF NOT EXISTS idx_search_projects_fulltext ON projects USING gin(to_tsvector('chinese', project_name || ' ' || description));
CREATE INDEX CONCURRENTLY IF NOT EXISTS idx_search_enterprise_capabilities_fulltext ON enterprise_capabilities USING gin(to_tsvector('chinese', name || ' ' || description));
CREATE INDEX CONCURRENTLY IF NOT EXISTS idx_search_ai_assistants_fulltext ON ai_assistants USING gin(to_tsvector('chinese', name || ' ' || description));

-- åˆ›å»ºå‘é‡ç´¢å¼•
CREATE INDEX CONCURRENTLY IF NOT EXISTS idx_enterprise_capabilities_embedding ON enterprise_capabilities USING ivfflat (embedding_vector vector_cosine_ops);
```

### Redisé…ç½®
```yaml
# redis.conf - Redisé…ç½®æ–‡ä»¶
# åŸºç¡€é…ç½®
port 6379
bind 127.0.0.1
protected-mode no
daemonize yes
pidfile /var/run/redis/redis-server.pid
logfile /var/log/redis/redis-server.log
loglevel notice

# å†…å­˜é…ç½®
maxmemory 2gb
maxmemory-policy allkeys-lru

# æŒä¹…åŒ–é…ç½®
save 900 1
save 300 10
save 60 10000
stop-writes-on-bgsave-error yes

# å®‰å…¨é…ç½®
requirepass your-redis-password
rename-command FLUSHDB "CONFIRM"

# ç½‘ç»œé…ç½®
timeout 300
tcp-keepalive 60
tcp-backlog 300
tcp-keepalive-timeout 60

# æ€§èƒ½ä¼˜åŒ–
maxclients 10000
tcp-backlog 511
slowlog-log-slow-more-than 10000

# å†…å­˜ä¼˜åŒ–
hash-max-ziplist-entries 512
hash-max-ziplist-value 64
hash-max-ziplist-entries 512
```

{
  "report_metrics": [
    {
      "metric_no": "METRIC001",
      "metric_name": "项目总数",
      "metric_code": "project_count",
      "report_code": "REPORT001",
      "calculation_type": "count",
      "data_source": "projects",
      "aggregation": "sum",
      "dimensions": ["status", "organization_id", "created_date"],
      "filters": ["deleted_at IS NULL"],
      "unit": "个",
      "display_format": "number",
      "refresh_interval": 300
    },
    {
      "metric_no": "METRIC002",
      "metric_name": "中标率",
      "metric_code": "win_rate",
      "report_code": "REPORT002",
      "calculation_type": "percentage",
      "formula": "(won_count / total_count) * 100",
      "data_source": "projects",
      "aggregation": "avg",
      "dimensions": ["month", "project_type", "industry"],
      "unit": "%",
      "display_format": "percentage",
      "precision": 2,
      "trend_period": "month"
    },
    {
      "metric_no": "METRIC003",
      "metric_name": "平均标书金额",
      "metric_code": "avg_bid_amount",
      "report_code": "REPORT002",
      "calculation_type": "average",
      "data_source": "projects",
      "field": "budget_amount",
      "aggregation": "avg",
      "dimensions": ["status", "industry"],
      "unit": "万元",
      "display_format": "currency",
      "currency": "CNY",
      "scale": 10000
    },
    {
      "metric_no": "METRIC004",
      "metric_name": "活跃用户数",
      "metric_code": "active_users",
      "report_code": "REPORT001",
      "calculation_type": "count_distinct",
      "data_source": "user_activities",
      "field": "user_id",
      "time_window": "30d",
      "aggregation": "distinct",
      "dimensions": ["organization_id", "user_role"],
      "unit": "人",
      "display_format": "number"
    },
    {
      "metric_no": "METRIC005",
      "metric_name": "文档生成数",
      "metric_code": "document_generated",
      "report_code": "REPORT003",
      "calculation_type": "count",
      "data_source": "bid_documents",
      "aggregation": "sum",
      "dimensions": ["user_id", "created_date", "document_type"],
      "unit": "份",
      "display_format": "number",
      "comparison": "previous_period"
    },
    {
      "metric_no": "METRIC006",
      "metric_name": "平均完成时间",
      "metric_code": "avg_completion_time",
      "report_code": "REPORT003",
      "calculation_type": "duration",
      "formula": "avg(completed_at - created_at)",
      "data_source": "projects",
      "aggregation": "avg",
      "dimensions": ["user_id", "project_type"],
      "unit": "天",
      "display_format": "duration",
      "threshold": {
        "good": "< 7",
        "warning": "7-14",
        "bad": "> 14"
      }
    },
    {
      "metric_no": "METRIC007",
      "metric_name": "AI调用次数",
      "metric_code": "ai_calls",
      "report_code": "REPORT004",
      "calculation_type": "count",
      "data_source": "ai_usage_logs",
      "aggregation": "sum",
      "dimensions": ["model_name", "operation_type", "date"],
      "unit": "次",
      "display_format": "number",
      "breakdown": ["gpt-4", "claude-3", "文心一言"]
    },
    {
      "metric_no": "METRIC008",
      "metric_name": "AI生成Token数",
      "metric_code": "ai_tokens",
      "report_code": "REPORT004",
      "calculation_type": "sum",
      "data_source": "ai_usage_logs",
      "field": "total_tokens",
      "aggregation": "sum",
      "dimensions": ["model_name", "user_id", "date"],
      "unit": "tokens",
      "display_format": "number",
      "scale_unit": ["K", "M"]
    },
    {
      "metric_no": "METRIC009",
      "metric_name": "AI成本",
      "metric_code": "ai_cost",
      "report_code": "REPORT004",
      "calculation_type": "sum",
      "data_source": "ai_usage_logs",
      "field": "cost",
      "aggregation": "sum",
      "dimensions": ["model_name", "organization_id", "month"],
      "unit": "元",
      "display_format": "currency",
      "currency": "CNY",
      "alert_threshold": 10000
    },
    {
      "metric_no": "METRIC010",
      "metric_name": "质量得分",
      "metric_code": "quality_score",
      "report_code": "REPORT003",
      "calculation_type": "weighted_average",
      "formula": "(completeness * 0.3 + accuracy * 0.3 + compliance * 0.4)",
      "data_source": "document_reviews",
      "aggregation": "avg",
      "dimensions": ["user_id", "document_type"],
      "unit": "分",
      "display_format": "score",
      "max_value": 100,
      "color_scale": {
        "0-60": "red",
        "60-80": "yellow",
        "80-100": "green"
      }
    },
    {
      "metric_no": "METRIC011",
      "metric_name": "客户满意度",
      "metric_code": "customer_satisfaction",
      "report_code": "REPORT001",
      "calculation_type": "average",
      "data_source": "project_feedback",
      "field": "satisfaction_score",
      "aggregation": "avg",
      "dimensions": ["project_id", "client_name"],
      "unit": "分",
      "display_format": "rating",
      "max_value": 5,
      "display_type": "stars"
    },
    {
      "metric_no": "METRIC012",
      "metric_name": "需求匹配度",
      "metric_code": "requirement_match_rate",
      "report_code": "REPORT002",
      "calculation_type": "percentage",
      "formula": "(matched_requirements / total_requirements) * 100",
      "data_source": "project_requirements",
      "aggregation": "avg",
      "dimensions": ["project_id", "requirement_type"],
      "unit": "%",
      "display_format": "percentage",
      "benchmark": 85
    },
    {
      "metric_no": "METRIC013",
      "metric_name": "模板使用率",
      "metric_code": "template_usage_rate",
      "report_code": "REPORT001",
      "calculation_type": "percentage",
      "formula": "(template_used_count / total_document_count) * 100",
      "data_source": "bid_documents",
      "aggregation": "avg",
      "dimensions": ["template_id", "organization_id"],
      "unit": "%",
      "display_format": "percentage",
      "sort": "desc"
    },
    {
      "metric_no": "METRIC014",
      "metric_name": "协作人数",
      "metric_code": "collaboration_users",
      "report_code": "REPORT003",
      "calculation_type": "count_distinct",
      "data_source": "collaboration_sessions",
      "field": "user_id",
      "aggregation": "distinct",
      "dimensions": ["document_id", "session_date"],
      "unit": "人",
      "display_format": "number"
    },
    {
      "metric_no": "METRIC015",
      "metric_name": "系统可用率",
      "metric_code": "system_availability",
      "report_code": "REPORT001",
      "calculation_type": "percentage",
      "formula": "(uptime_minutes / total_minutes) * 100",
      "data_source": "system_metrics",
      "aggregation": "avg",
      "dimensions": ["service_name", "date"],
      "unit": "%",
      "display_format": "percentage",
      "sla_target": 99.9,
      "realtime": true
    },
    {
      "metric_no": "METRIC016",
      "metric_name": "响应时间",
      "metric_code": "response_time",
      "report_code": "REPORT001",
      "calculation_type": "percentile",
      "data_source": "api_metrics",
      "field": "response_time_ms",
      "percentile": 95,
      "aggregation": "p95",
      "dimensions": ["api_endpoint", "hour"],
      "unit": "ms",
      "display_format": "duration",
      "alert_threshold": 1000
    },
    {
      "metric_no": "METRIC017",
      "metric_name": "错误率",
      "metric_code": "error_rate",
      "report_code": "REPORT001",
      "calculation_type": "percentage",
      "formula": "(error_count / total_requests) * 100",
      "data_source": "api_metrics",
      "aggregation": "avg",
      "dimensions": ["api_endpoint", "error_type", "hour"],
      "unit": "%",
      "display_format": "percentage",
      "alert_threshold": 1,
      "trend": "lower_is_better"
    },
    {
      "metric_no": "METRIC018",
      "metric_name": "存储使用量",
      "metric_code": "storage_usage",
      "report_code": "REPORT001",
      "calculation_type": "sum",
      "data_source": "storage_metrics",
      "field": "used_bytes",
      "aggregation": "sum",
      "dimensions": ["organization_id", "storage_type"],
      "unit": "GB",
      "display_format": "bytes",
      "scale": 1073741824,
      "quota_limit": 1000
    },
    {
      "metric_no": "METRIC019",
      "metric_name": "转化率",
      "metric_code": "conversion_rate",
      "report_code": "REPORT002",
      "calculation_type": "funnel",
      "stages": [
        {"name": "项目创建", "field": "project_created"},
        {"name": "文档生成", "field": "document_generated"},
        {"name": "提交投标", "field": "bid_submitted"},
        {"name": "中标", "field": "bid_won"}
      ],
      "data_source": "project_funnel",
      "dimensions": ["industry", "quarter"],
      "unit": "%",
      "display_format": "funnel_chart"
    },
    {
      "metric_no": "METRIC020",
      "metric_name": "ROI投资回报率",
      "metric_code": "roi",
      "report_code": "REPORT002",
      "calculation_type": "ratio",
      "formula": "((revenue - cost) / cost) * 100",
      "data_source": "financial_metrics",
      "aggregation": "avg",
      "dimensions": ["organization_id", "year"],
      "unit": "%",
      "display_format": "percentage",
      "comparison": "year_over_year",
      "target": 300
    }
  ],
  "metric_calculations": [
    {
      "calc_id": "CALC001",
      "calc_name": "移动平均计算",
      "calc_type": "moving_average",
      "window_size": 7,
      "applicable_metrics": ["METRIC001", "METRIC005", "METRIC007"]
    },
    {
      "calc_id": "CALC002",
      "calc_name": "同比增长率",
      "calc_type": "year_over_year",
      "formula": "((current_year - previous_year) / previous_year) * 100",
      "applicable_metrics": ["METRIC002", "METRIC003", "METRIC009"]
    },
    {
      "calc_id": "CALC003",
      "calc_name": "环比增长率",
      "calc_type": "month_over_month",
      "formula": "((current_month - previous_month) / previous_month) * 100",
      "applicable_metrics": ["METRIC001", "METRIC005", "METRIC007"]
    },
    {
      "calc_id": "CALC004",
      "calc_name": "累计计算",
      "calc_type": "cumulative",
      "reset_period": "yearly",
      "applicable_metrics": ["METRIC009", "METRIC018"]
    }
  ],
  "metric_alerts": [
    {
      "alert_id": "ALERT001",
      "metric_no": "METRIC009",
      "alert_name": "AI成本超限",
      "condition": "value > 10000",
      "severity": "high",
      "notification_channels": ["email", "system"]
    },
    {
      "alert_id": "ALERT002",
      "metric_no": "METRIC015",
      "alert_name": "系统可用率低于SLA",
      "condition": "value < 99.9",
      "severity": "critical",
      "notification_channels": ["email", "sms", "system"]
    },
    {
      "alert_id": "ALERT003",
      "metric_no": "METRIC016",
      "alert_name": "响应时间过慢",
      "condition": "value > 1000",
      "severity": "medium",
      "notification_channels": ["system"]
    }
  ],
  "visualization_config": [
    {
      "viz_id": "VIZ001",
      "metric_ids": ["METRIC001", "METRIC004"],
      "chart_type": "line_chart",
      "x_axis": "date",
      "y_axis": "value",
      "colors": ["#1890ff", "#52c41a"]
    },
    {
      "viz_id": "VIZ002",
      "metric_ids": ["METRIC002"],
      "chart_type": "gauge",
      "min_value": 0,
      "max_value": 100,
      "thresholds": [30, 60, 90]
    },
    {
      "viz_id": "VIZ003",
      "metric_ids": ["METRIC007", "METRIC008"],
      "chart_type": "stacked_bar",
      "group_by": "model_name",
      "stack_by": "date"
    },
    {
      "viz_id": "VIZ004",
      "metric_ids": ["METRIC019"],
      "chart_type": "funnel",
      "show_percentage": true,
      "show_values": true
    }
  ],
  "metadata": {
    "version": "1.0",
    "total_metrics": 20,
    "metric_types": ["count", "percentage", "average", "sum", "duration", "ratio", "funnel"],
    "data_sources": ["projects", "bid_documents", "ai_usage_logs", "system_metrics"],
    "refresh_intervals": ["realtime", "1m", "5m", "1h", "1d"],
    "created_date": "2025-11-27",
    "last_updated": "2025-11-27",
    "note": "报表指标定义，包含计算方法、聚合维度、可视化配置"
  }
}
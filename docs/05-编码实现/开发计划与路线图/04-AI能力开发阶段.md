---
æ–‡æ¡£ç±»å‹: å®ç°æ–‡æ¡£
éœ€æ±‚ç¼–å·: DOC-2025-11-001
åˆ›å»ºæ—¥æœŸ: 2025-11-29
åˆ›å»ºè€…: claude-sonnet-4-5 (claude-sonnet-4-5-20250929)
æœ€åæ›´æ–°: 2025-11-29
æ›´æ–°è€…: claude-sonnet-4-5 (claude-sonnet-4-5-20250929)
çŠ¶æ€: å·²æ‰¹å‡†
---

# AIæ ‡ä¹¦æ™ºèƒ½åˆ›ä½œå¹³å° - AIèƒ½åŠ›å¼€å‘é˜¶æ®µ

> **å¼€å‘å‘¨æœŸ**: ç¬¬10-12å‘¨ï¼ˆ3å‘¨ï¼‰
> **å›¢é˜Ÿ**: AIå·¥ç¨‹å¸ˆ2äºº
> **ç›®æ ‡**: å®ŒæˆAIæ ¸å¿ƒèƒ½åŠ›ï¼ˆæ–‡æ¡£è§£æã€æ™ºèƒ½åŒ¹é…ã€å†…å®¹ç”Ÿæˆï¼‰

## ğŸ“‹ æ–‡æ¡£å¯¼èˆª

æœ¬æ–‡æ¡£æ˜¯å¼€å‘è®¡åˆ’ä¸è·¯çº¿å›¾çš„ä¸€éƒ¨åˆ†ï¼Œå…¶ä»–ç›¸å…³æ–‡æ¡£ï¼š

1. [00-å¼€å‘è®¡åˆ’æ€»è§ˆ.md](./00-å¼€å‘è®¡åˆ’æ€»è§ˆ.md) - é¡¹ç›®é˜¶æ®µæ¦‚è§ˆå’Œå›¢é˜Ÿé…ç½®
2. [01-å‡†å¤‡ä¸åŸºç¡€è®¾æ–½é˜¶æ®µ.md](./01-å‡†å¤‡ä¸åŸºç¡€è®¾æ–½é˜¶æ®µ.md) - é˜¶æ®µ0-1å¼€å‘è®¡åˆ’
3. [02-åç«¯å¼€å‘é˜¶æ®µ.md](./02-åç«¯å¼€å‘é˜¶æ®µ.md) - é˜¶æ®µ2åç«¯æ ¸å¿ƒå¼€å‘
4. [03-å‰ç«¯å¼€å‘é˜¶æ®µ.md](./03-å‰ç«¯å¼€å‘é˜¶æ®µ.md) - é˜¶æ®µ3å‰ç«¯æ ¸å¿ƒå¼€å‘
5. **04-AIèƒ½åŠ›å¼€å‘é˜¶æ®µ.md**ï¼ˆæœ¬æ–‡æ¡£ï¼‰- é˜¶æ®µ4 AIèƒ½åŠ›å¼€å‘
6. [05-ä¸šåŠ¡åŠŸèƒ½å¼€å‘é˜¶æ®µ.md](./05-ä¸šåŠ¡åŠŸèƒ½å¼€å‘é˜¶æ®µ.md) - é˜¶æ®µ5ä¸šåŠ¡åŠŸèƒ½å¼€å‘
7. [06-æµ‹è¯•éƒ¨ç½²ä¸æ€»ç»“.md](./06-æµ‹è¯•éƒ¨ç½²ä¸æ€»ç»“.md) - é˜¶æ®µ6-7æµ‹è¯•éƒ¨ç½²

## é˜¶æ®µ4ï¼šAIèƒ½åŠ›å¼€å‘ (ç¬¬10-12å‘¨)


**ç›®æ ‡**: å®ŒæˆAIæœåŠ¡é›†æˆã€å‘é‡æ£€ç´¢ã€çŸ¥è¯†å›¾è°±ç­‰AIæ ¸å¿ƒåŠŸèƒ½

### ä»»åŠ¡ 4.1: LLMæœåŠ¡é›†æˆ

**è´Ÿè´£äºº**: AIå·¥ç¨‹å¸ˆ
**å·¥æ—¶**: 24å°æ—¶
**ä¼˜å…ˆçº§**: P0

**è¯¦ç»†æ­¥éª¤**:

1. **LLMå®¢æˆ·ç«¯åŸºç¡€** (6h)
   - [ ] å®‰è£…ä¾èµ–:
     ```bash
     pip install langchain openai anthropic zhipuai
     ```
   - [ ] åˆ›å»ºapp/services/ai/llm_client.py
   - [ ] å®ç°å¤šProvideræ”¯æŒï¼ˆOpenAIã€Anthropicã€Zhipuï¼‰
   - [ ] å®ç°ç»Ÿä¸€è°ƒç”¨æ¥å£
   - [ ] æ·»åŠ é”™è¯¯å¤„ç†å’Œé‡è¯•
   - [ ] æ·»åŠ Tokenè®¡æ•°

2. **Promptç®¡ç†ç³»ç»Ÿ** (6h)
   - [ ] åˆ›å»ºPromptæ¨¡æ¿æ•°æ®åº“è¡¨ï¼ˆå·²åœ¨ä»»åŠ¡1.1å®Œæˆï¼‰
   - [ ] å®ç°Prompt CRUDæ“ä½œ
   - [ ] å®ç°Promptç‰ˆæœ¬æ§åˆ¶
   - [ ] å®ç°å˜é‡æ›¿æ¢åŠŸèƒ½
   - [ ] æ·»åŠ Promptç¼“å­˜

3. **AIä»»åŠ¡é˜Ÿåˆ—** (6h)
   - [ ] é…ç½®Celery:
     ```python
     # app/tasks/celery_app.py
     from celery import Celery

     celery_app = Celery(
         'aibidcomposer',
         broker=settings.CELERY_BROKER_URL,
         backend=settings.CELERY_RESULT_BACKEND
     )

     celery_app.conf.task_routes = {
         'app.tasks.ai.*': {'queue': 'ai'},
         'app.tasks.default.*': {'queue': 'default'},
     }
     ```
   - [ ] åˆ›å»ºAIä»»åŠ¡:
     ```python
     @celery_app.task(bind=True, max_retries=3)
     async def generate_content_task(
         self,
         document_id: str,
         prompt: str,
         model: str = "gpt-4-turbo-preview"
     ):
         try:
             llm_client = LLMClient()
             response = await llm_client.chat(
                 messages=[{"role": "user", "content": prompt}],
                 model=model
             )

             # ä¿å­˜ç»“æœåˆ°æ•°æ®åº“
             await save_ai_result(document_id, response)

             return response
         except Exception as exc:
             raise self.retry(exc=exc, countdown=60)
     ```
   - [ ] å®ç°ä»»åŠ¡çŠ¶æ€è·Ÿè¸ª
   - [ ] å®ç°ä»»åŠ¡å–æ¶ˆåŠŸèƒ½

4. **LLMæœåŠ¡API** (4h)
   - [ ] å®ç°å†…å®¹ç”ŸæˆAPI
   - [ ] å®ç°éœ€æ±‚åˆ†æAPI
   - [ ] å®ç°è´¨é‡å®¡æŸ¥API
   - [ ] æ·»åŠ æµå¼å“åº”æ”¯æŒ

5. **æˆæœ¬ç›‘æ§** (2h)
   - [ ] å®ç°Tokenä½¿ç”¨ç»Ÿè®¡
   - [ ] å®ç°æˆæœ¬è®¡ç®—
   - [ ] åˆ›å»ºä½¿ç”¨æŠ¥è¡¨
   - [ ] æ·»åŠ é¢„ç®—å‘Šè­¦

**äº¤ä»˜ç‰©**:
- LLMå®¢æˆ·ç«¯
- Promptç®¡ç†ç³»ç»Ÿ
- AIä»»åŠ¡é˜Ÿåˆ—
- LLMæœåŠ¡API
- æˆæœ¬ç›‘æ§ç³»ç»Ÿ

**éªŒæ”¶æ ‡å‡†**:
- èƒ½å¤ŸæˆåŠŸè°ƒç”¨GPT-4ç”Ÿæˆå†…å®¹
- Promptç®¡ç†æ­£å¸¸å·¥ä½œ
- å¼‚æ­¥ä»»åŠ¡æ­£å¸¸æ‰§è¡Œ
- Tokenç»Ÿè®¡å‡†ç¡®
- æˆæœ¬è®¡ç®—æ­£ç¡®

---

### ä»»åŠ¡ 4.2: å‘é‡æ£€ç´¢æœåŠ¡

**è´Ÿè´£äºº**: AIå·¥ç¨‹å¸ˆ
**å·¥æ—¶**: 20å°æ—¶
**ä¾èµ–**: ä»»åŠ¡4.1

**è¯¦ç»†æ­¥éª¤**:

1. **Pineconeé…ç½®** (3h)
   - [ ] æ³¨å†ŒPineconeè´¦å·
   - [ ] åˆ›å»ºç´¢å¼•:
     ```python
     import pinecone

     pinecone.init(
         api_key=settings.PINECONE_API_KEY,
         environment=settings.PINECONE_ENVIRONMENT
     )

     # åˆ›å»ºç´¢å¼•
     if "aibidcomposer" not in pinecone.list_indexes():
         pinecone.create_index(
             name="aibidcomposer",
             dimension=1536,  # OpenAI embedding dimension
             metric="cosine",
             pods=1,
             pod_type="p1.x1"
         )
     ```
   - [ ] é…ç½®å‘½åç©ºé—´
   - [ ] é…ç½®å…ƒæ•°æ®è¿‡æ»¤

2. **EmbeddingæœåŠ¡** (5h)
   - [ ] åˆ›å»ºapp/services/ai/embedding_service.py:
     ```python
     from openai import OpenAI

     class EmbeddingService:
         def __init__(self):
             self.client = OpenAI(api_key=settings.OPENAI_API_KEY)

         async def embed_text(self, text: str) -> list[float]:
             response = await self.client.embeddings.create(
                 model="text-embedding-ada-002",
                 input=text
             )
             return response.data[0].embedding

         async def embed_batch(self, texts: list[str]) -> list[list[float]]:
             response = await self.client.embeddings.create(
                 model="text-embedding-ada-002",
                 input=texts
             )
             return [item.embedding for item in response.data]
     ```
   - [ ] å®ç°æ–‡æœ¬å‘é‡åŒ–
   - [ ] å®ç°æ‰¹é‡å‘é‡åŒ–
   - [ ] æ·»åŠ ç¼“å­˜æœºåˆ¶

3. **å‘é‡å­˜å‚¨æœåŠ¡** (6h)
   - [ ] åˆ›å»ºapp/services/ai/vector_store.py
   - [ ] å®ç°æ–‡æ¡£ä¸Šä¼ åˆ°å‘é‡åº“
   - [ ] å®ç°å‘é‡æ£€ç´¢
   - [ ] å®ç°æ··åˆæ£€ç´¢ï¼ˆå‘é‡+å…³é”®è¯ï¼‰
   - [ ] å®ç°ç»“æœé‡æ’åº

4. **æ–‡æ¡£ç´¢å¼•ä»»åŠ¡** (4h)
   - [ ] åˆ›å»ºæ–‡æ¡£åˆ†å—é€»è¾‘
   - [ ] åˆ›å»ºç´¢å¼•ä»»åŠ¡:
     ```python
     @celery_app.task
     async def index_document_task(document_id: str):
         # 1. è·å–æ–‡æ¡£å†…å®¹
         document = await get_document(document_id)

         # 2. åˆ†å—
         chunks = split_document(document.content, chunk_size=500)

         # 3. ç”Ÿæˆembeddings
         embeddings = await embedding_service.embed_batch(chunks)

         # 4. ä¸Šä¼ åˆ°Pinecone
         await vector_store.upsert(
             vectors=[
                 {
                     "id": f"{document_id}_{i}",
                     "values": embedding,
                     "metadata": {
                         "document_id": document_id,
                         "chunk_index": i,
                         "text": chunk,
                     }
                 }
                 for i, (chunk, embedding) in enumerate(zip(chunks, embeddings))
             ],
             namespace="documents"
         )
     ```
   - [ ] å®ç°å¢é‡ç´¢å¼•
   - [ ] å®ç°ç´¢å¼•åˆ é™¤

5. **æ£€ç´¢API** (2h)
   - [ ] POST /api/v1/ai/search (è¯­ä¹‰æœç´¢)
   - [ ] POST /api/v1/ai/similar (ç›¸ä¼¼æ–‡æ¡£)
   - [ ] å®ç°æ£€ç´¢ç»“æœé«˜äº®

**äº¤ä»˜ç‰©**:
- Pineconeé›†æˆ
- EmbeddingæœåŠ¡
- å‘é‡å­˜å‚¨æœåŠ¡
- æ–‡æ¡£ç´¢å¼•ç³»ç»Ÿ
- æ£€ç´¢API

**éªŒæ”¶æ ‡å‡†**:
- æ–‡æ¡£èƒ½å¤ŸæˆåŠŸç´¢å¼•åˆ°Pinecone
- è¯­ä¹‰æœç´¢è¿”å›ç›¸å…³ç»“æœ
- æ£€ç´¢æ€§èƒ½<500ms
- ç›¸ä¼¼åº¦è®¡ç®—å‡†ç¡®

---

### ä»»åŠ¡ 4.3: çŸ¥è¯†å›¾è°±æœåŠ¡

**è´Ÿè´£äºº**: AIå·¥ç¨‹å¸ˆ
**å·¥æ—¶**: 20å°æ—¶
**ä¾èµ–**: ä»»åŠ¡4.2

**è¯¦ç»†æ­¥éª¤**:

1. **Neo4jé…ç½®** (3h)
   - [ ] å®‰è£…Neo4jï¼ˆDockeræ–¹å¼ï¼‰
   - [ ] åˆ›å»ºæ•°æ®åº“
   - [ ] é…ç½®è¿æ¥:
     ```python
     from neo4j import AsyncGraphDatabase

     class KnowledgeGraph:
         def __init__(self):
             self.driver = AsyncGraphDatabase.driver(
                 settings.NEO4J_URI,
                 auth=(settings.NEO4J_USER, settings.NEO4J_PASSWORD)
             )

         async def close(self):
             await self.driver.close()
     ```
   - [ ] åˆ›å»ºç´¢å¼•å’Œçº¦æŸ

2. **å®ä½“æå–** (6h)
   - [ ] ä½¿ç”¨LLMæå–å®ä½“:
     ```python
     async def extract_entities(text: str) -> list[Entity]:
         prompt = f"""
         ä»ä»¥ä¸‹æ–‡æœ¬ä¸­æå–å…³é”®å®ä½“ï¼ŒåŒ…æ‹¬ï¼š
         - å…¬å¸åç§°
         - äº§å“/æœåŠ¡
         - æŠ€æœ¯æ ˆ
         - é¡¹ç›®æ¡ˆä¾‹

         æ–‡æœ¬ï¼š{text}

         ä»¥JSONæ ¼å¼è¿”å›æå–çš„å®ä½“ã€‚
         """

         response = await llm_client.chat(
             messages=[{"role": "user", "content": prompt}],
             model="gpt-4-turbo-preview"
         )

         entities = json.loads(response["content"])
         return entities
     ```
   - [ ] å®ç°å®ä½“å»é‡
   - [ ] å®ç°å®ä½“æ ‡å‡†åŒ–
   - [ ] å®ç°å®ä½“åˆ†ç±»

3. **å…³ç³»æå–** (5h)
   - [ ] ä½¿ç”¨LLMæå–å…³ç³»
   - [ ] å®ç°å…³ç³»åˆ†ç±»
   - [ ] å®ç°å…³ç³»éªŒè¯
   - [ ] åˆ›å»ºçŸ¥è¯†å›¾è°±

4. **å›¾è°±æŸ¥è¯¢** (4h)
   - [ ] å®ç°è·¯å¾„æŸ¥è¯¢
   - [ ] å®ç°å­å›¾æŸ¥è¯¢
   - [ ] å®ç°å›¾ç®—æ³•ï¼ˆPageRankã€ç¤¾åŒºå‘ç°ï¼‰
   - [ ] å®ç°å¯è§†åŒ–æ•°æ®ç”Ÿæˆ

5. **æ™ºèƒ½åŒ¹é…** (2h)
   - [ ] å®ç°éœ€æ±‚-èƒ½åŠ›åŒ¹é…:
     ```python
     async def match_capabilities(requirement_id: str) -> list[Capability]:
         async with self.driver.session() as session:
             result = await session.run(
                 """
                 MATCH (req:Requirement {id: $requirement_id})
                 MATCH (cap:Capability)
                 WHERE EXISTS {
                     MATCH (req)-[:REQUIRES_SKILL]->(skill)<-[:HAS_SKILL]-(cap)
                 }
                 WITH cap, COUNT(skill) as common_skills
                 ORDER BY common_skills DESC
                 LIMIT 10
                 RETURN cap, common_skills
                 """,
                 requirement_id=requirement_id
             )
             return [record["cap"] for record in result]
     ```
   - [ ] è®¡ç®—åŒ¹é…åº¦åˆ†æ•°

**äº¤ä»˜ç‰©**:
- Neo4jé›†æˆ
- å®ä½“æå–æœåŠ¡
- å…³ç³»æå–æœåŠ¡
- å›¾è°±æŸ¥è¯¢æœåŠ¡
- æ™ºèƒ½åŒ¹é…API

**éªŒæ”¶æ ‡å‡†**:
- å®ä½“æå–å‡†ç¡®ç‡>80%
- å…³ç³»æå–åˆç†
- å›¾è°±æŸ¥è¯¢æ­£å¸¸
- åŒ¹é…ç»“æœç›¸å…³

---

### ä»»åŠ¡ 4.4: AIå·¥ä½œæµç¼–æ’

**è´Ÿè´£äºº**: AIå·¥ç¨‹å¸ˆ
**å·¥æ—¶**: 20å°æ—¶
**ä¾èµ–**: ä»»åŠ¡4.3

**è¯¦ç»†æ­¥éª¤**:

1. **LangGraphé…ç½®** (4h)
   - [ ] å®‰è£…langgraph: `pip install langgraph`
   - [ ] åˆ›å»ºå·¥ä½œæµçŠ¶æ€:
     ```python
     from typing import TypedDict, Annotated
     from langgraph.graph import StateGraph

     class BidWorkflowState(TypedDict):
         project_id: str
         bidding_document: str
         requirements: list[str]
         matched_capabilities: list[dict]
         generated_sections: dict[str, str]
         review_results: dict[str, Any]
         final_document: str
     ```

2. **å·¥ä½œæµèŠ‚ç‚¹å®ç°** (8h)
   - [ ] éœ€æ±‚åˆ†æèŠ‚ç‚¹:
     ```python
     async def analyze_requirements(state: BidWorkflowState):
         document = state["bidding_document"]

         # è°ƒç”¨LLMåˆ†æéœ€æ±‚
         requirements = await requirement_analyst.analyze(document)

         return {"requirements": requirements}
     ```
   - [ ] èƒ½åŠ›åŒ¹é…èŠ‚ç‚¹
   - [ ] å†…å®¹ç”ŸæˆèŠ‚ç‚¹
   - [ ] è´¨é‡å®¡æŸ¥èŠ‚ç‚¹
   - [ ] äººå·¥å®¡æ ¸èŠ‚ç‚¹

3. **å·¥ä½œæµå®šä¹‰** (4h)
   - [ ] åˆ›å»ºå·¥ä½œæµå›¾:
     ```python
     workflow = StateGraph(BidWorkflowState)

     # æ·»åŠ èŠ‚ç‚¹
     workflow.add_node("analyze", analyze_requirements)
     workflow.add_node("match", match_capabilities)
     workflow.add_node("generate", generate_content)
     workflow.add_node("review", review_quality)
     workflow.add_node("human_review", human_review)

     # æ·»åŠ è¾¹
     workflow.set_entry_point("analyze")
     workflow.add_edge("analyze", "match")
     workflow.add_edge("match", "generate")
     workflow.add_edge("generate", "review")

     # æ¡ä»¶è¾¹
     workflow.add_conditional_edges(
         "review",
         should_human_review,
         {
             "approve": END,
             "reject": "generate",
             "manual": "human_review"
         }
     )

     app = workflow.compile()
     ```
   - [ ] å®ç°æ¡ä»¶è·³è½¬
   - [ ] å®ç°å¾ªç¯å¤„ç†

4. **å·¥ä½œæµæ‰§è¡Œ** (2h)
   - [ ] å®ç°å·¥ä½œæµå¯åŠ¨API
   - [ ] å®ç°å·¥ä½œæµæš‚åœ/æ¢å¤
   - [ ] å®ç°å·¥ä½œæµå–æ¶ˆ
   - [ ] å®ç°çŠ¶æ€æŒä¹…åŒ–

5. **ç›‘æ§å’Œè°ƒè¯•** (2h)
   - [ ] å®ç°å·¥ä½œæµå¯è§†åŒ–
   - [ ] å®ç°æ‰§è¡Œæ—¥å¿—
   - [ ] å®ç°æ€§èƒ½ç›‘æ§
   - [ ] æ·»åŠ è°ƒè¯•å·¥å…·

**äº¤ä»˜ç‰©**:
- LangGraphå·¥ä½œæµ
- æ ‡ä¹¦åˆ›ä½œå·¥ä½œæµ
- å·¥ä½œæµæ‰§è¡Œå¼•æ“
- ç›‘æ§å’Œè°ƒè¯•å·¥å…·

**éªŒæ”¶æ ‡å‡†**:
- å·¥ä½œæµèƒ½å¤Ÿå®Œæ•´æ‰§è¡Œ
- æ¯ä¸ªèŠ‚ç‚¹æ­£å¸¸å·¥ä½œ
- æ¡ä»¶è·³è½¬æ­£ç¡®
- çŠ¶æ€æŒä¹…åŒ–æ­£å¸¸
- å¯ä»¥æš‚åœå’Œæ¢å¤

---

## é˜¶æ®µ5ï¼šä¸šåŠ¡åŠŸèƒ½å¼€å‘ (ç¬¬13-16å‘¨)

## ğŸ”— ç›¸å…³æ–‡æ¡£

- **å¼€å‘è®¡åˆ’æ€»è§ˆ**: [00-å¼€å‘è®¡åˆ’æ€»è§ˆ.md](./00-å¼€å‘è®¡åˆ’æ€»è§ˆ.md)
- **åç«¯å¼€å‘**: [02-åç«¯å¼€å‘é˜¶æ®µ.md](./02-åç«¯å¼€å‘é˜¶æ®µ.md)
- **å‰ç«¯å¼€å‘**: [03-å‰ç«¯å¼€å‘é˜¶æ®µ.md](./03-å‰ç«¯å¼€å‘é˜¶æ®µ.md)
- **ä¸šåŠ¡åŠŸèƒ½å¼€å‘**: [05-ä¸šåŠ¡åŠŸèƒ½å¼€å‘é˜¶æ®µ.md](./05-ä¸šåŠ¡åŠŸèƒ½å¼€å‘é˜¶æ®µ.md)

## ä¿®æ”¹å†å²

| æ—¥æœŸ | ç‰ˆæœ¬ | ä¿®æ”¹è€… | ä¿®æ”¹å†…å®¹æ¦‚è¦ |
|------|------|--------|-------------|
| 2025-11-29 | 1.0 | claude-sonnet-4-5 (claude-sonnet-4-5-20250929) | ä»å¼€å‘è®¡åˆ’ä¸è·¯çº¿å›¾.mdæ‹†åˆ†åˆ›å»ºAIèƒ½åŠ›å¼€å‘é˜¶æ®µæ–‡æ¡£ |

---

**æ–‡æ¡£ç‰ˆæœ¬**: v1.0
**åˆ›å»ºæ—¶é—´**: 2025å¹´11æœˆ29æ—¥
**æ–‡æ¡£çŠ¶æ€**: âœ… å·²æ‰¹å‡†
